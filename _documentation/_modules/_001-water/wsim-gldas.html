<!DOCTYPE html>

<html data-content_root="../../../" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="WSIM-GLDAS" property="og:title"/>
<meta content="website" property="og:type"/>
<meta content="_documentation/_modules/_001-water/wsim-gldas.html" property="og:url"/>
<meta content="Project name not set" property="og:site_name"/>
<meta content="modules water-module open-science-101 research In this comprehensive lesson, you will embark on an immersive journey that combines advanced data acquisition, pre-processing, and exploration of vita..." property="og:description"/>
<meta content="modules water-module open-science-101 research In this comprehensive lesson, you will embark on an immersive journey that combines advanced data acquisition, pre-processing, and exploration of vita..." name="description"/>
<title>WSIM-GLDAS</title>
<meta content="WSIM-GLDAS" property="og:title"/>
<meta content="WSIM-GLDAS" name="twitter:title"/>
<script crossorigin="anonymous" src="https://kit.fontawesome.com/8bcdaaff4d.js"></script>
<link href="../../../_static/pygments.css?v=8e8a900e" rel="stylesheet" type="text/css"/>
<link href="../../../_static/theme.css" rel="stylesheet" type="text/css"/>
<link href="../../../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
<link href="../../../_static/sphinx-design.min.css?v=95c83b7e" rel="stylesheet" type="text/css"/>
<link href="../../../_static/bootstrap-carousel.min.css?v=fd277c8b" rel="stylesheet" type="text/css"/>
<link href="../../../_static/carousel-custom.css?v=6fe5d8c5" rel="stylesheet" type="text/css"/>
<link href="../../../_static/css/override.css?v=b12a2ec4" rel="stylesheet" type="text/css"/>
<link href="../../../_static/coeus.css?v=820e54fe" rel="stylesheet" type="text/css"/><link href="https://ciesin-geospatial.github.io/TOPSTSCHOOL-OSDMP/_documentation/_modules/_001-water/wsim-gldas.html" rel="canonical"/>
<link href="../../../_static/favicon.png" rel="icon"/>
<link href="../../../search.html" rel="search" title="Search"/>
</head>
<body :class="{ 'overflow-hidden': showSidebar }" class="min-h-screen font-sans antialiased bg-background text-foreground" x-data="{ showSidebar: false }">
<div @click.self="showSidebar = false" class="fixed inset-0 z-50 overflow-hidden bg-background/80 backdrop-blur-sm md:hidden" x-cloak="x-cloak" x-show="showSidebar"></div>
<div class="relative flex flex-col min-h-screen" id="page">
<header class="sticky top-0 z-40 w-full border-b shadow-sm border-border supports-backdrop-blur:bg-background/60 bg-background/95 backdrop-blur">
<div class="container flex items-center h-14">
<div class="hidden mr-4 md:flex">
<a class="flex items-center mr-6" href="../../../index.html">
<img alt="Logo" class="mr-2 dark:invert" height="24" src="../../../_static/logo.png" width="24"/><span class="hidden font-bold sm:inline-block text-clip whitespace-nowrap">TOPST SCHOOL Universe</span>
</a>
</div><button @click="showSidebar = true" class="inline-flex items-center justify-center h-10 px-0 py-2 mr-2 text-base font-medium transition-colors rounded-md hover:text-accent-foreground hover:bg-transparent md:hidden" type="button">
<svg aria-hidden="true" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M152.587 825.087q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440Zm0-203.587q-19.152 0-32.326-13.174T107.087 576q0-19.152 13.174-32.326t32.326-13.174h320q19.152 0 32.326 13.174T518.087 576q0 19.152-13.174 32.326T472.587 621.5h-320Zm0-203.587q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440ZM708.913 576l112.174 112.174q12.674 12.674 12.674 31.826t-12.674 31.826Q808.413 764.5 789.261 764.5t-31.826-12.674l-144-144Q600 594.391 600 576t13.435-31.826l144-144q12.674-12.674 31.826-12.674t31.826 12.674q12.674 12.674 12.674 31.826t-12.674 31.826L708.913 576Z"></path>
</svg>
<span class="sr-only">Toggle navigation menu</span>
</button>
<div class="flex items-center justify-between flex-1 space-x-2 sm:space-x-4 md:justify-end"><nav class="flex items-center space-x-6 text-sm font-medium">
<div class="navbar-dropdown">
<button class="dropbtn">Open Science Resources</button>
<div class="navbar-dropdown-content">
<a href="../../../_resources/external-resources.html">External Resources</a>
<a href="../../../_resources/glossary.html">Glossary</a>
</div>
</div>
<div class="navbar-dropdown">
<button class="dropbtn">Community</button>
<div class="navbar-dropdown-content">
<a href="../../../_community/contributor-guidelines.html">Contribution Guidelines</a>
<a href="../../../_community/upcoming-events.html">Events &amp; Webinars</a>
<a href="../../../_community/becoming-reviewer.html">Review &amp; Approval</a>
<a href="../../../_community/meet-the-team.html">Meet the Team</a>
</div>
</div>
<div class="navbar-dropdown">
<button class="dropbtn">About Us</button>
<div class="navbar-dropdown-content">
<a href="../../../_about-us/vision-mission.html">Vision &amp; Mission</a>
<a href="../../../_about-us/getting-involved.html">How to Get Involved</a>
<a href="../../../_about-us/announcements.html">Announcements</a>
</div>
</div>
</nav>
<div class="flex-1 w-full md:w-auto md:flex-none">
<form @keydown.k.window.meta="$refs.search.focus()" action="../../../search.html" class="relative flex items-center group" id="searchbox" method="get">
<input aria-label="Search the docs" class="inline-flex items-center font-medium transition-colors bg-transparent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ring-offset-background border border-input hover:bg-accent focus:bg-accent hover:text-accent-foreground focus:text-accent-foreground hover:placeholder-accent-foreground py-2 px-4 relative h-9 w-full justify-start rounded-5rem text-sm text-muted-foreground md:w-40 lg:w-64" id="search-input" name="q" placeholder="Search" type="search" x-ref="search"/>
</form>
</div>
<nav class="flex items-center space-x-1">
</nav>
</div>
</div>
</header>
<div class="flex-1"><div class="container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] lg:grid-cols-[240px_minmax(0,1fr)]">
<aside :aria-hidden="!showSidebar" :class="{ 'translate-x-0': showSidebar }" class="fixed inset-y-0 left-0 md:top-14 z-50 md:z-30 bg-background md:bg-transparent transition-all duration-1000 -translate-x-full md:translate-x-0 ml-0 px-4 md:h-[calc(100vh-3.5rem)] w-5/6 md:w-full shrink-0 overflow-y-auto border-l border-r border-border md:sticky" id="left-sidebar">
<a class="!justify-start text-sm md:!hidden bg-background" href="../../../index.html">
<img alt="Logo" class="mr-2 dark:invert" height="16" src="../../../_static/logo.png" width="16"/><span class="font-bold text-clip whitespace-nowrap">TOPST SCHOOL Universe</span>
</a>
<div class="relative overflow-hidden md:overflow-auto my-4 md:my-0 h-[calc(100vh-8rem)] md:h-auto">
<div class="overflow-y-auto fixed h-full w-full relative">
<nav class="flex md:hidden flex-col font-medium mt-4">
<div class="dropdown">
<button class="dropbtn">Open Science Resources</button>
<div class="dropdown-content">
<a href="../../../_resources/external-resources.html">External Resources</a>
<a href="../../../_resources/glossary.html">Glossary</a>
</div>
</div>
<div class="dropdown">
<button class="dropbtn">Community</button>
<div class="dropdown-content">
<a href="../../../_community/contributor-guidelines.html">Contribution Guidelines</a>
<a href="../../../_community/upcoming-events.html">Events &amp; Webinars</a>
<a href="../../../_community/becoming-reviewer.html">Review &amp; Approval</a>
<a href="../../../_community/meet-the-team.html">Meet the Team</a>
</div>
</div>
<div class="dropdown">
<button class="dropbtn">About Us</button>
<div class="dropdown-content">
<a href="../../../_about-us/vision-mission.html">Vision &amp; Mission</a>
<a href="../../../_about-us/getting-involved.html">How to Get Involved</a>
<a href="../../../_about-us/announcements.html">Announcements</a>
</div>
</div>
</nav>

<nav class="table w-full min-w-full my-6 lg:my-8">
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1 current" x-data="{ expanded: $el.classList.contains('current') }"><a :class="{ 'expanded': expanded }" @click="expanded = !expanded" class="reference internal expandable" href="overview.html">Water<button @click.prevent.stop="expanded = !expanded" type="button"><i class="fa-solid fa-circle-plus"></i></button></a><ul class="current" x-show="expanded">
<li class="toctree-l2 current"><a class="current reference internal" href="#">WSIM-GLDAS</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials &amp; Guides</span></p>
<ul>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') }"><a :class="{ 'expanded': expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../_tutorials/_001-basics/open-science-101.html">Open Science Basics<button @click.prevent.stop="expanded = !expanded" type="button"><i class="fa-solid fa-circle-plus"></i></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_001-basics/accounts.html">Account Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_001-basics/workspace.html">Workspace Setup</a></li>
</ul>
</li>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') }"><a :class="{ 'expanded': expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../_tutorials/_002-contributing/topst.html">Contribution Guides<button @click.prevent.stop="expanded = !expanded" type="button"><i class="fa-solid fa-circle-plus"></i></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_002-contributing/research.html">Research</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_002-contributing/forking-cloning.html">Fork &amp; Clone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_002-contributing/submitting-pr.html">Submit Pull Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_002-contributing/code-review.html">Workflow</a></li>
</ul>
</li>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') }"><a :class="{ 'expanded': expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../_tutorials/_003-management/data-management.html">Data Management<button @click.prevent.stop="expanded = !expanded" type="button"><i class="fa-solid fa-circle-plus"></i></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_003-management/open-science-repos.html">Data Repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_003-management/organizing-data.html">Sharing Data</a></li>
</ul>
</li>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') }"><a :class="{ 'expanded': expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../_tutorials/_004-advanced/advanced-cfg.html">Advanced Configuration<button @click.prevent.stop="expanded = !expanded" type="button"><i class="fa-solid fa-circle-plus"></i></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_004-advanced/github-ssh.html">SSH Keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_004-advanced/setting-venv.html">Virtual Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/_004-advanced/updating.html">Documentation</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
</aside>
<main class="relative py-6 lg:gap-10 lg:py-8 xl:grid xl:grid-cols-[1fr] border-r">
<div #23a6d5,="" #23d5ab)")="" #e73c7e,="" #ee7752,="" ="linear-gradient(-45deg,="" class="title-hero-container" style="background-image:  linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);" }};""="">
<span class="fa-solid fa-water title-hero-icon"></span>
<div class="title-hero-content"></div>
</div>
<div class="w-full min-w-0 mx-auto">
<nav aria-label="breadcrumbs" class="flex items-center mb-4 space-x-1 text-sm text-muted-foreground">
<a class="overflow-hidden text-ellipsis whitespace-nowrap hover:text-foreground" href="../../../index.html">
<span class="hidden md:inline">TOPST SCHOOL Universe</span>
<svg aria-label="Home" class="md:hidden" fill="currentColor" height="18" stroke="none" viewbox="0 96 960 960" width="18" xmlns="http://www.w3.org/2000/svg">
<path d="M240 856h120V616h240v240h120V496L480 316 240 496v360Zm-80 80V456l320-240 320 240v480H520V696h-80v240H160Zm320-350Z"></path>
</svg>
</a><a class="hover:text-foreground overflow-hidden text-ellipsis whitespace-nowrap" href="overview.html">Water</a>
<div class="mr-1">/</div><span aria-current="page" class="font-bold text-foreground overflow-hidden text-ellipsis whitespace-nowrap">WSIM-GLDAS</span>
</nav>
<div class="page-content" id="content" role="main"><section id="wsim-gldas">
<h1>WSIM-GLDAS<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#wsim-gldas"></a></h1>

<div class="title-hero-summary">
<p class="font-medium">Acquisition, Exploration and Integration with Water Security Indicator
Model - Global Land Data Assimilation System (WSIM-GLDAS).</p>
</div>
<p class="tags"><span> </span><a class="sd-sphinx-override sd-badge sd-bg-primary sd-bg-text-primary reference internal" href="../../../_tags/modules.html"><span class="doc">modules</span></a><span> </span><a class="sd-sphinx-override sd-badge sd-bg-primary sd-bg-text-primary reference internal" href="../../../_tags/water-module.html"><span class="doc">water-module</span></a><span> </span><a class="sd-sphinx-override sd-badge sd-bg-primary sd-bg-text-primary reference internal" href="../../../_tags/open-science-101.html"><span class="doc">open-science-101</span></a><span> </span><a class="sd-sphinx-override sd-badge sd-bg-primary sd-bg-text-primary reference internal" href="../../../_tags/research.html"><span class="doc">research</span></a></p>

<div class="container flex-1 px-0 my-8">
<p class="contributors-timestamp">June 03, 2024</p>
<div class="contributors-publisher">
<span>Authored by <a aria-label="Ask Josh Brinks via email" href="mailto:test@test.com?subject=[TOPST SCHOOL Universe] WSIM-GLDAS">Josh Brinks</a> and <a aria-label="Ask Elaine Famutimi via email" href="mailto:test@test.com?subject=[TOPST SCHOOL Universe] WSIM-GLDAS">Elaine Famutimi</a></span>
<div class="project-socials">
<a aria-label="Check out source on GitHub" class="fa-brands fa-github" href="https://github.com/ciesin-geospatial/TOPSTSCHOOL-OSDMP" target="_blank"></a>
<a aria-label="Ask author via email" class="fa-solid fa-envelope" href="mailto:TOPSTSCHOOL@gmail.com?subject=[TOPST SCHOOL Universe] WSIM-GLDAS" style="font-weight: 900;"></a>
<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied to clipboard'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy article URL to clipboard'), 2000)" aria-label="Copy article URL to clipboard" class="fa-solid fa-link copylink" href="#" style="font-weight: 900;"></a>
</div>
</div>
<div class="contributors-article-metadata">
<p class="contributors-metadata-badge" id="readingTime"></p>
<p class="contributors-metadata-badge">
<i class="fa-solid fa-location-dot" style="padding-right: 0.3rem;"></i>Earth
                </p>
<div class="language-switcher">
<p class="contributors-metadata-badge">
<i class="fa-solid fa-language" style="padding-right: 0.3rem;"></i>
<select class="no-chevron-select" id="language-selector" onchange="switchLanguage()">
<option value="en">
                                    English
                                </option>
<option value="es">
                                    Español
                                </option>
</select>
</p>
</div>
</div>
</div>
<p>In this comprehensive lesson, you will embark on an immersive journey that
combines advanced data acquisition, pre-processing, and exploration of vital
water security data. Specifically, you will retrieve the <strong>Water Security
Indicator Model - Global Land Data Assimilation System (WSIM-GLDAS)</strong> dataset,
available from NASA’s <strong>Socioeconomic Data and Applications Center (SEDAC)</strong>.
This dataset provides crucial insights into water anomalies, such as droughts
and floods, and will serve as the foundation for your analysis.</p>
<figure class="align-default" id="id20">
<img alt="A true color satellite image of California shows drought." class="height-450 object-fit-center" src="https://svs.gsfc.nasa.gov/vis/a010000/a012900/a012950/SierraNevada_tmo_2014018_lrg_16x9_1024x576.jpg"/>
<figcaption>
<p><span class="caption-text">This true color satellite image of California illustrates regions
experiencing water stress such as droughts. Visual representations like
this are essential for understanding the spatial distribution of water
security risks and guiding decision-making processes to manage limited
freshwater resources. <a class="footnote-reference brackets" href="#nasa-svs-1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a></span><a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#id20"></a></p>
</figcaption>
</figure>
<p>As you progress through this lesson, you will be guided step by step through
several pre-processing tasks designed to help you make sense of this complex
data. You will learn not only how to handle and subset the WSIM-GLDAS dataset
but also how to enhance its value by integrating it with other globally
recognized datasets. In particular, you will incorporate the <strong>geoBoundaries</strong>
dataset, which offers global administrative boundary data, and the <strong>Gridded
Population of the World</strong> dataset, a vital resource for understanding how human
populations are affected by water anomalies.</p>
<p>Through the lesson, you’ll engage in a series of data manipulations and
visualizations, gaining practical skills in handling large-scale geospatial
data. These advanced visualizations will empower you to reveal patterns in
precipitation deficits and surpluses, providing a clearer understanding of how
water-related events impact specific regions. Ultimately, by the end of the
lesson, you’ll have a complete workflow in place to retrieve, process, and
visualize complex data, arming you with the tools to explore critical water
security issues affecting communities around the globe.</p>
<div class="scbs-carousel scbs-slide scbs-carousel-fade" id="carousel-0">
<div class="scbs-carousel-inner">
<div class="scbs-carousel-item scbs-active">
<img alt="../../../_images/viz-1.webp" class="scbs-d-block scbs-w-100" src="../../../_images/viz-1.webp"/>
</div>
<div class="scbs-carousel-item">
<img alt="../../../_images/viz-2.webp" class="scbs-d-block scbs-w-100" src="../../../_images/viz-2.webp"/>
</div>
<div class="scbs-carousel-item">
<img alt="../../../_images/viz-3.webp" class="scbs-d-block scbs-w-100" src="../../../_images/viz-3.webp"/>
</div>
<div class="scbs-carousel-item">
<img alt="../../../_images/viz-4.webp" class="scbs-d-block scbs-w-100" src="../../../_images/viz-4.webp"/>
</div>
<div class="scbs-carousel-item">
<img alt="../../../_images/viz-5.webp" class="scbs-d-block scbs-w-100" src="../../../_images/viz-5.webp"/>
</div>
</div>
<button class="scbs-carousel-control-prev" data-bs-slide="prev" data-bs-target="#carousel-0" type="button">
<span aria-hidden="true" class="scbs-carousel-control-prev-icon"></span>
<span class="scbs-visually-hidden">Previous</span>
</button>
<button class="scbs-carousel-control-next" data-bs-slide="next" data-bs-target="#carousel-0" type="button">
<span aria-hidden="true" class="scbs-carousel-control-next-icon"></span>
<span class="scbs-visually-hidden">Next</span>
</button>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Learning Objectives</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-right" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">By the end of this lesson, you will have developed a solid understanding of
the technical and analytical skills needed to work with complex datasets in
the field of water security. You will have gained the ability to:</p>
<ul class="simple">
<li><p class="sd-card-text"><strong>Retrieve WSIM-GLDAS Data.</strong> Confidently access the WSIM-GLDAS dataset
from the NASA SEDAC website, ensuring you can efficiently acquire the
necessary data for analysis.</p></li>
<li><p class="sd-card-text"><strong>Access Administrative Boundaries.</strong> Use the geoBoundaries API to
retrieve up-to-date global administrative boundary data, allowing you to
contextualize the WSIM-GLDAS dataset within specific regional borders.</p></li>
<li><p class="sd-card-text"><strong>Subset WSIM-GLDAS Data.</strong> Learn how to filter and subset the WSIM-GLDAS
data for specific regions and time periods, enabling you to focus on
areas of particular interest in your analysis.</p></li>
<li><p class="sd-card-text"><strong>Visualize Geospatial Data.</strong> Create insightful geospatial
visualizations that highlight patterns of precipitation deficits, helping
you to communicate complex findings with clarity and precision.</p></li>
<li><p class="sd-card-text"><strong>Save Pre-Processed Data.</strong> Export your pre-processed NetCDF-formatted
files to disk, giving you the ability to save and share your refined
datasets for future use or collaboration.</p></li>
<li><p class="sd-card-text"><strong>Explore Data Visually.</strong> Master advanced data visualization techniques,
including the creation of histograms, choropleths, and time series maps,
to explore patterns and trends within the dataset.</p></li>
<li><p class="sd-card-text"><strong>Integrate Population Data.</strong> Combine the WSIM-GLDAS data with Gridded
Population of the World data to analyze how water anomalies intersect
with population distribution, providing valuable insights into the human
impacts of water security issues.</p></li>
<li><p class="sd-card-text"><strong>Summarize Data with Zonal Statistics.</strong> Utilize zonal statistics to
summarize the WSIM-GLDAS and population raster data, providing an
analytical overview of how water shortages or surpluses affect specific
regions and communities.</p></li>
</ul>
<p class="sd-card-text">Through these objectives, you will not only gain proficiency in handling
complex geospatial data but also develop a deeper understanding of how
these datasets can be leveraged to solve real-world challenges,
particularly in the realm of water security and population impacts.</p>
</div>
</details><section id="introduction">
<h2>Introduction<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#introduction"></a></h2>
<p>The <strong>Water cycle</strong>, also known as the <strong>Hydrologic cycle</strong>, refers to the
continuous movement and circulation of water across, above, and below the
Earth’s surface. It is a fundamental process that sustains life, ensuring that
water is recycled and made available through precipitation, evaporation, and
condensation (NOAA, 2019 <a class="footnote-reference brackets" href="#id14" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>). However, human activities in recent decades
<span class="raw-html">—</span> such as the emission of greenhouse gases, land-use alterations, the
construction of dams and reservoirs, and the extraction of groundwater
<span class="raw-html">—</span> have increasingly disrupted the natural flow of this cycle (IPCC,
2023 <a class="footnote-reference brackets" href="#id15" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>). These anthropogenic influences have had significant and
far-reaching consequences on various processes tied to oceans, groundwater
systems, and land surfaces. As a result, extreme events like droughts and
floods are becoming more frequent and intense (Zhou, 2016 <a class="footnote-reference brackets" href="#id16" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>).</p>
<div class="scbs-carousel scbs-slide scbs-carousel-fade" id="carousel-1">
<div class="scbs-carousel-indicators">
<button aria-current="true" aria-label="Slide 1" class="scbs-active" data-bs-slide-to="0" data-bs-target="#carousel-1" type="button"></button>
<button aria-label="Slide 2" data-bs-slide-to="1" data-bs-target="#carousel-1" type="button"></button>
</div>
<div class="scbs-carousel-inner">
<div class="scbs-carousel-item scbs-active">
<img alt="Impact of Human Activities on the Water Cycle" class="scbs-d-block scbs-w-100" src="../../../_images/greenhouse-effect.webp"/>
<div class="scbs-carousel-caption scbs-bg-dark scbs-d-sm-block scc-below-control">
<h5>Impact of Human Activities on the Water Cycle. Human activities such as
greenhouse gas emissions, deforestation, and dam construction are
altering the natural flow of the water cycle, leading to environmental
imbalances. </h5>
</div>
</div>
<div class="scbs-carousel-item">
<img alt="Impact of Human Activities on the Water Cycle" class="scbs-d-block scbs-w-100" src="../../../_images/pollution-factory-emisions.webp"/>
<div class="scbs-carousel-caption scbs-bg-dark scbs-d-sm-block scc-below-control">
<h5>Impact of Human Activities on the Water Cycle. Human activities such as
greenhouse gas emissions, deforestation, and dam construction are
altering the natural flow of the water cycle, leading to environmental
imbalances. </h5>
</div>
</div>
</div>
<button class="scbs-carousel-control-prev" data-bs-slide="prev" data-bs-target="#carousel-1" type="button">
<span aria-hidden="true" class="scbs-carousel-control-prev-icon"></span>
<span class="scbs-visually-hidden">Previous</span>
</button>
<button class="scbs-carousel-control-next" data-bs-slide="next" data-bs-target="#carousel-1" type="button">
<span aria-hidden="true" class="scbs-carousel-control-next-icon"></span>
<span class="scbs-visually-hidden">Next</span>
</button>
</div>
<p>Drought, which occurs when precipitation deficits persist over time, is
characterized by prolonged dry periods that lead to severe water shortages. The
cascading effects of drought are felt across ecosystems, agriculture, and human
communities, often creating feedback loops that exacerbate environmental
stresses (Rodgers, 2023 <a class="footnote-reference brackets" href="#id17" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>). For instance, California is notorious for
recurrent droughts, but prolonged dry spells, coupled with sustained high
temperatures, severely reduced the replenishment of fresh water to key water
bodies like the <strong>Klamath River</strong>. From 2003 to 2014, the state experienced
extreme water shortages that had devastating effects. These shortages
significantly impacted California’s Central Valley, a vital agricultural region
responsible for producing 80% of the world’s almonds. The droughts also caused
ecological distress by triggering declines in <a class="reference external" href="https://www.fisheries.noaa.gov/species/chinook-salmon">Chinook salmon</a> populations, as the
lack of fresh water led to heat stress and disease outbreaks among the fish,
affecting the Klamath basin tribal groups, who rely heavily on these salmon for
sustenance (Guillen, 2002 <a class="footnote-reference brackets" href="#id18" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>; Bland, 2014 <a class="footnote-reference brackets" href="#id19" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a>).</p>
<figure class="align-default" id="id21">
<img alt="Indigenous Communities and Water Resources." class="height-450 object-fit-center" src="https://ca-times.brightspotcdn.com/dims4/default/15e8000/2147483647/strip/true/crop/4032x3024+0+0/resize/840x630!/quality/90/?url=https://california-times-brightspot.s3.amazonaws.com/1e/a1/eb76da6f4c5a9ad847549d2b3fa9/tsfxbams.jpeg"/>
<figcaption>
<p><span class="caption-text">Indigenous Communities and Water Resources. The Klamath basin tribal groups
depend on the Chinook salmon for their livelihood, but water shortages and
environmental stress have led to a significant decline in salmon
populations. <a class="footnote-reference brackets" href="#klamath-death" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a></span><a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#id21"></a></p>
</figcaption>
</figure>
<p>To better understand and quantify such changes in water availability and their
implications, datasets like the <strong>Water Security (WSIM-GLDAS) Monthly Grids, v1
(1948 - 2014)</strong> are invaluable. This particular dataset offers detailed
insights into freshwater surpluses and deficits across the globe, tracking them
monthly over a 66-year period from January 1948 to December 2014 (ISciences &amp;
CIESIN-Columbia University, 2022b <a class="footnote-reference brackets" href="#isciences" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>).</p>
<p>The WSIM-GLDAS dataset organizes its data by <strong>thematic variables</strong> such as
temperature, runoff, soil moisture, precipitation, and evapotranspiration, as
well as temporal aggregation periods (e.g., 1-month, 3-month, 6-month, and
12-month intervals). This structure allows for comprehensive exploration of
water-related anomalies across various timescales. The data files, stored in
<strong>NetCDF (.nc)</strong> format, contain time-dimensioned <a class="reference internal" href="../../../_resources/glossary.html#term-Raster"><span class="xref std std-term">raster</span></a> layers, each
representing one of the <strong>804 months</strong> in the dataset. Some variables even
contain multiple attributes with their own time series. It is important to note
that because the dataset is vast and consists of multiple layers, downloading
and handling the files can be resource-intensive, possibly leading to memory
issues on some computers.</p>
<p>This dataset represents what is known as <strong>“Big Data”</strong>, requiring advanced
tools and techniques to analyze and draw meaningful conclusions from. By
working with this dataset, students and researchers will gain practical
experience dealing with complex, large-scale data, while also exploring
critical water security issues at a global level.</p>
</section>
<section id="about-the-data">
<h2>About the Data<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#about-the-data"></a></h2>
<p>For this lesson, we will work with the <strong>WSIM-GLDAS dataset</strong> focusing on the
<strong>Composite Anomaly Twelve-Month Return Period NetCDF file</strong>. This file
includes <strong>water deficit</strong>, <strong>surplus</strong>, and <strong>composite anomaly</strong> variables,
each with a 12-month integration period. The integration period refers to the
timeframe over which anomaly values are averaged. In this case, the 12-month
integration averages water-related anomalies like droughts and floods over a
year, providing a high-level overview of water deficits, surpluses, and
combined anomalies. This helps in understanding yearly trends, and once we’ve
identified key time periods of interest, we can refine our analysis using the
<strong>3-months</strong> or <strong>1-month</strong> integration periods.</p>
<p>We’ll start by downloading the file directly from the SEDAC website. The
<a class="reference external" href="https://sedac.ciesin.columbia.edu/downloads/docs/water/water-wsim-gldas-v1-documentation.pdf">dataset documentation</a> highlights the composite variables as
essential elements of WSIM-GLDAS, which integrate the return periods of
multiple water-related parameters into composite indices of overall water
surpluses and deficits (ISciences &amp; CIESIN-Columbia University, 2022a
<a class="footnote-reference brackets" href="#isciences" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>). These composite anomaly files provide data in terms of return
periods, indicating how often anomalies such as droughts or floods occur. For
example, a deficit return period of 25 suggests a drought so severe that it
would only occur once every 25 years.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Downloading the Dataset</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-right" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<ul class="simple">
<li><p class="sd-card-text">Visit the <a class="reference external" href="https://sedac.ciesin.columbia.edu/">SEDAC</a> website.</p></li>
<li><p class="sd-card-text">You can navigate through themes, datasets, or collections on the
platform. For this exercise, use the search bar to look up “<strong>wsim</strong>.”</p></li>
<li><p class="sd-card-text">Locate and select the Water Security (WSIM-GLDAS) Monthly Grids, v1
(1948-2014) dataset.</p></li>
<li><p class="sd-card-text">When you’re ready, go to the <strong>Data Download</strong> tab. You’ll need to sign
in using your NASA EarthData account. <a class="reference internal" href="../../_tutorials/_001-basics/accounts.html"><span class="doc">Learn more</span></a> <span class="raw-html"><i class="fa-solid fa-chevron-right fa-2xs link-auxillaries"></i></span></p></li>
<li><p class="sd-card-text">Once logged in, find the Composite Class and select the <strong>Variable
Composite Anomaly Twelve-Month Return Period</strong> for download.</p></li>
</ul>
</div>
</details></section>
<section id="loading-the-dataset">
<h2>Loading the Dataset<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#loading-the-dataset"></a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-0">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-1">
Python</label><div class="sd-tab-content docutils">
<p>After downloading the <strong>WSIM-GLDAS</strong> file to your local machine, the
next step is to prepare your <strong>Python environment</strong> by installing and
loading the necessary <strong>packages</strong>. This is an essential part of
ensuring your system is ready to handle the data processing
efficiently. This installation process makes it easier to manage
dependencies.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m pip install \</span>
<span class="go">    exactextract \</span>
<span class="go">    geopandas \</span>
<span class="go">    numpy \</span>
<span class="go">    pandas \</span>
<span class="go">    plotnine \</span>
<span class="go">    rasterio \</span>
<span class="go">    requests \</span>
<span class="go">    rioxarray \</span>
<span class="go">    xarray</span>
</pre></div>
</div>
<p>Once the packages are installed and you have the
<code class="docutils literal notranslate"><span class="pre">composite_anom_12mo.nc</span></code> file in your working directory, it’s time to
begin reading the file. We will be using
<a class="reference external" href="https://docs.xarray.dev/en/stable/index.html#module-xarray" title="(in xarray v2024.9.1.dev0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xarray</span></code></a>, let’s start by importing it.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
</pre></div>
</div>
<p>The below code is configuring <a class="reference external" href="https://docs.xarray.dev/en/stable/index.html#module-xarray" title="(in xarray v2024.9.1.dev0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xarray</span></code></a> options
and <a class="reference external" href="https://ipython.readthedocs.io/en/stable/api/generated/IPython.html#module-IPython" title="(in IPython v8.28.0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">IPython</span></code></a> display settings to control the
behavior of data representation and plotting in Jupyter notebooks.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xr</span><span class="o">.</span><span class="n">set_options</span><span class="p">(</span>
    <span class="n">keep_attrs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">display_expand_attrs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">display_expand_coords</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">display_expand_data</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">display_expand_data_vars</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="o">%</span><span class="k">config</span> InlineBackend.figure_format="retina"
<span class="n">small</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">medium</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">large</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">14</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"axes.labelsize"</span><span class="p">:</span> <span class="n">medium</span><span class="p">,</span>
    <span class="s2">"axes.spines.right"</span><span class="p">:</span> <span class="kc">False</span>
    <span class="s2">"axes.spines.top"</span><span class="p">:</span> <span class="kc">False</span>
    <span class="s2">"axes.titlesize"</span><span class="p">:</span> <span class="n">medium</span><span class="p">,</span>
    <span class="s2">"axes.titlesize"</span><span class="p">:</span> <span class="n">medium</span><span class="p">,</span>
    <span class="s2">"figure.figsize"</span><span class="p">:</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="s2">"figure.titlesize"</span><span class="p">:</span> <span class="n">large</span><span class="p">,</span>
    <span class="s2">"image.interpolation"</span><span class="p">:</span> <span class="s2">"nearest"</span><span class="p">,</span>
    <span class="s2">"image.origin"</span><span class="p">:</span> <span class="s2">"lower"</span><span class="p">,</span>
    <span class="s2">"legend.fontsize"</span><span class="p">:</span> <span class="n">medium</span><span class="p">,</span>
    <span class="s2">"xtick.labelsize"</span><span class="p">:</span> <span class="n">medium</span><span class="p">,</span>
    <span class="s2">"ytick.labelsize"</span><span class="p">:</span> <span class="n">medium</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">"seaborn-v0_8-whitegrid"</span><span class="p">)</span>
</pre></div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Code Explanation</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-right" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<ol class="arabic">
<li><p class="sd-card-text"><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.set_options.html#xarray.set_options" title="(in xarray v2024.9.1.dev0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xarray.set_options</span></code></a></p>
<p class="sd-card-text">This <code class="docutils literal notranslate"><span class="pre">class</span></code> used to set global options that affect the
behavior of <code class="docutils literal notranslate"><span class="pre">xarray</span></code> operations. Here’s what each option
does:</p>
<ul class="simple">
<li><p class="sd-card-text"><code class="code highlight python python3 docutils literal highlight-python3"><span class="n">keep_attrs</span><span class="o">=</span><span class="kc">True</span><span class="o">.</span></code> This ensures that metadata are
preserved when performing operations on <code class="docutils literal notranslate"><span class="pre">xarray</span></code> objects.
By default, many <code class="docutils literal notranslate"><span class="pre">xarray</span></code> operations drop attributes, but
setting this to <code class="code highlight python python3 docutils literal highlight-python3"><span class="kc">True</span></code> prevents that.</p></li>
<li><p class="sd-card-text"><code class="code highlight python python3 docutils literal highlight-python3"><span class="n">display_expand_attrs</span><span class="o">=</span><span class="kc">False</span><span class="o">.</span></code> This controls the
display of attributes in the <code class="docutils literal notranslate"><span class="pre">xarray</span></code> object’s
representation. Setting this to <code class="code highlight python python3 docutils literal highlight-python3"><span class="kc">False</span></code> keeps the
attribute section collapsed when printing an <code class="docutils literal notranslate"><span class="pre">xarray</span></code>
object.</p></li>
<li><p class="sd-card-text"><code class="code highlight python python3 docutils literal highlight-python3"><span class="n">display_expand_coords</span><span class="o">=</span><span class="kc">False</span><span class="o">.</span></code> This option controls
whether coordinate variables are expanded (shown in detail)
when displaying an <code class="docutils literal notranslate"><span class="pre">xarray</span></code> object. Setting it to
<code class="code highlight python python3 docutils literal highlight-python3"><span class="kc">False</span></code> collapses the coordinate details.</p></li>
<li><p class="sd-card-text"><code class="code highlight python python3 docutils literal highlight-python3"><span class="n">display_expand_data</span><span class="o">=</span><span class="kc">False</span><span class="o">.</span></code> Similar to the previous
options, this collapses the data section of the <code class="docutils literal notranslate"><span class="pre">xarray</span></code>
object when printing. This can make the display of large
datasets more manageable.</p></li>
<li><p class="sd-card-text"><code class="code highlight python python3 docutils literal highlight-python3"><span class="n">display_expand_data_vars</span><span class="o">=</span><span class="kc">False</span><span class="o">.</span></code> This option
collapses the display of data variables in the output of an
<code class="docutils literal notranslate"><span class="pre">xarray</span></code> dataset, keeping it neater for large datasets.</p></li>
</ul>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p class="sd-card-text">These options help manage how <code class="docutils literal notranslate"><span class="pre">xarray</span></code> data structures are
displayed in Jupyter notebooks, making them more concise by
collapsing various sections (attributes, coordinates, data, and
data variables).</p>
</div>
<ol class="arabic" start="2">
<li><p class="sd-card-text"><strong>%config InlineBackend.figure_format=”retina”</strong></p>
<p class="sd-card-text">This is an IPython <strong>magic</strong> command that configures the way
figures (like plots) are displayed in Jupyter notebooks. This
sets the figure resolution to “retina,” which produces
high-resolution plots for better visual quality, especially on
displays with high pixel density (like MacBooks with Retina
displays). This is commonly used in Jupyter notebooks to make
plots look crisper.</p>
</li>
</ol>
</div>
</details><p>Using the <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.open_dataset.html#xarray.open_dataset" title="(in xarray v2024.9.1.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">xarray.open_dataset()</span></code></a> function, read
the file and print the dataset.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the WSIM-GLDAS dataset (12-month composite netCDF file)</span>
<span class="n">wsim_gldas</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">"composite_12mo.nc"</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">"netcdf4"</span><span class="p">)</span>
<span class="n">wsim_gldas</span>
</pre></div>
</div>
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 14GB
Dimensions:                       (lon: 1440, lat: 600, time: 793)
Coordinates: (3)
Data variables: (7)
Attributes: (5)</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-6b86ea27-b93d-4d22-8954-9c78884c8eff" type="checkbox"/><label class="xr-section-summary" for="section-6b86ea27-b93d-4d22-8954-9c78884c8eff" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lon</span>: 1440</li><li><span class="xr-has-index">lat</span>: 600</li><li><span class="xr-has-index">time</span>: 793</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-4c17987d-7def-453a-ad04-e80e99f356a5" type="checkbox"/><label class="xr-section-summary" for="section-4c17987d-7def-453a-ad04-e80e99f356a5">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-179.9 -179.6 ... 179.6 179.9</div><input class="xr-var-attrs-in" id="attrs-113ab351-1e16-43ae-96a4-6011a4610876" type="checkbox"/><label for="attrs-113ab351-1e16-43ae-96a4-6011a4610876" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-4bb074f7-0919-4a9b-8795-a63819a9e7a7" type="checkbox"/><label for="data-4bb074f7-0919-4a9b-8795-a63819a9e7a7" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>standard_name :</span></dt><dd>longitude</dd></dl></div><div class="xr-var-data"><pre>array([-179.875, -179.625, -179.375, ...,  179.375,  179.625,  179.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">89.88 89.62 89.38 ... -59.62 -59.88</div><input class="xr-var-attrs-in" id="attrs-b3b7347f-ac60-47d8-85fa-b34961a9f898" type="checkbox"/><label for="attrs-b3b7347f-ac60-47d8-85fa-b34961a9f898" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-3de3b52b-5a9e-482d-bc8c-60567095d483" type="checkbox"/><label for="data-3de3b52b-5a9e-482d-bc8c-60567095d483" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>standard_name :</span></dt><dd>latitude</dd></dl></div><div class="xr-var-data"><pre>array([ 89.875,  89.625,  89.375, ..., -59.375, -59.625, -59.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1948-12-01 ... 2014-12-01</div><input class="xr-var-attrs-in" disabled="" id="attrs-6a42a809-d711-4f23-a7e1-a48fffc868b0" type="checkbox"/><label for="attrs-6a42a809-d711-4f23-a7e1-a48fffc868b0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-fa4eba12-4698-4478-803e-26b642e916e4" type="checkbox"/><label for="data-fa4eba12-4698-4478-803e-26b642e916e4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1948-12-01T00:00:00.000000000', '1949-01-01T00:00:00.000000000',
       '1949-02-01T00:00:00.000000000', ..., '2014-10-01T00:00:00.000000000',
       '2014-11-01T00:00:00.000000000', '2014-12-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-e3306f04-d8b9-47a8-a9cc-b83634e2bb62" type="checkbox"/><label class="xr-section-summary" for="section-e3306f04-d8b9-47a8-a9cc-b83634e2bb62">Data variables: <span>(7)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>deficit</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-7d61dbbc-551a-432a-aade-50323f6b04f7" type="checkbox"/><label for="attrs-7d61dbbc-551a-432a-aade-50323f6b04f7" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-22ad0d76-2dd7-45d1-98e6-009a95ea6008" type="checkbox"/><label for="data-22ad0d76-2dd7-45d1-98e6-009a95ea6008" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Composite Deficit Index</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd></dl></div><div class="xr-var-data"><pre>[685152000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>deficit_cause</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-0a864dc1-7b03-43ce-9e71-c59c0d596ec1" type="checkbox"/><label for="attrs-0a864dc1-7b03-43ce-9e71-c59c0d596ec1" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-46f441d3-9b68-4b40-988f-b0990adf0641" type="checkbox"/><label for="data-46f441d3-9b68-4b40-988f-b0990adf0641" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Cause of Deficit</dd><dt><span>flag_values :</span></dt><dd>[1 2 3]</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd><dt><span>flag_meanings :</span></dt><dd>neg_petme soil_moisture runoff_accum</dd></dl></div><div class="xr-var-data"><pre>[685152000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>surplus</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-8698afb6-4c0b-4174-b391-9d776f24b292" type="checkbox"/><label for="attrs-8698afb6-4c0b-4174-b391-9d776f24b292" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-9981fb5f-ea01-4a4d-b96a-c90dcbea23f8" type="checkbox"/><label for="data-9981fb5f-ea01-4a4d-b96a-c90dcbea23f8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Composite Surplus Index</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd></dl></div><div class="xr-var-data"><pre>[685152000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>surplus_cause</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-10bfd367-87b4-4f8b-b88a-6bcccfc1b5dc" type="checkbox"/><label for="attrs-10bfd367-87b4-4f8b-b88a-6bcccfc1b5dc" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-b2084b26-eec0-4f54-bbb1-1941433a2966" type="checkbox"/><label for="data-b2084b26-eec0-4f54-bbb1-1941433a2966" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Cause of Surplus</dd><dt><span>flag_values :</span></dt><dd>[1 2]</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd><dt><span>flag_meanings :</span></dt><dd>runoff runoff_accum</dd></dl></div><div class="xr-var-data"><pre>[685152000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>both</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-14e8557c-0609-4623-95f1-5e0fe89889a7" type="checkbox"/><label for="attrs-14e8557c-0609-4623-95f1-5e0fe89889a7" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-fea51eb2-d6c7-4779-8d53-8715c8579489" type="checkbox"/><label for="data-fea51eb2-d6c7-4779-8d53-8715c8579489" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Composite Combined Surplus &amp; Deficit Index</dd><dt><span>threshold :</span></dt><dd>3</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd></dl></div><div class="xr-var-data"><pre>[685152000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>crs</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-a0d75d8b-7888-4264-9e86-b5818c44ba3a" type="checkbox"/><label for="attrs-a0d75d8b-7888-4264-9e86-b5818c44ba3a" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-663ccadd-3a0c-429a-83c2-f433c1397288" type="checkbox"/><label for="data-663ccadd-3a0c-429a-83c2-f433c1397288" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0</dd><dt><span>semi_major_axis :</span></dt><dd>6378137</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]</dd></dl></div><div class="xr-var-data"><pre>[793 values with dtype=int32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>integration_period_end_month</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">&lt;U6</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-2548e76a-8966-4fdb-94dc-209927ca8f1b" type="checkbox"/><label for="attrs-2548e76a-8966-4fdb-94dc-209927ca8f1b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-6e916367-d51b-4998-937a-beac60515626" type="checkbox"/><label for="data-6e916367-d51b-4998-937a-beac60515626" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>YYYYMM</dd></dl></div><div class="xr-var-data"><pre>[793 values with dtype=&lt;U6]</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-d2866378-87e3-456f-9f9e-c1cad4797361" type="checkbox"/><label class="xr-section-summary" for="section-d2866378-87e3-456f-9f9e-c1cad4797361">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>lon</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-6ae17138-9400-4e91-9b5d-a209f1f2f956" type="checkbox"><label for="index-6ae17138-9400-4e91-9b5d-a209f1f2f956" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([-179.875, -179.625, -179.375, -179.125, -178.875, -178.625, -178.375,
       -178.125, -177.875, -177.625,
       ...
        177.625,  177.875,  178.125,  178.375,  178.625,  178.875,  179.125,
        179.375,  179.625,  179.875],
      dtype='float64', name='lon', length=1440))</pre></div></input></li><li class="xr-var-item"><div class="xr-index-name"><div>lat</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-3d8ae84a-0e2a-46a0-a05b-53e2a47be38c" type="checkbox"><label for="index-3d8ae84a-0e2a-46a0-a05b-53e2a47be38c" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([ 89.875,  89.625,  89.375,  89.125,  88.875,  88.625,  88.375,  88.125,
        87.875,  87.625,
       ...
       -57.625, -57.875, -58.125, -58.375, -58.625, -58.875, -59.125, -59.375,
       -59.625, -59.875],
      dtype='float64', name='lat', length=600))</pre></div></input></li><li class="xr-var-item"><div class="xr-index-name"><div>time</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-1c8754a8-47e5-4217-a214-c91037e1f2bf" type="checkbox"><label for="index-1c8754a8-47e5-4217-a214-c91037e1f2bf" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(DatetimeIndex(['1948-12-01', '1949-01-01', '1949-02-01', '1949-03-01',
               '1949-04-01', '1949-05-01', '1949-06-01', '1949-07-01',
               '1949-08-01', '1949-09-01',
               ...
               '2014-03-01', '2014-04-01', '2014-05-01', '2014-06-01',
               '2014-07-01', '2014-08-01', '2014-09-01', '2014-10-01',
               '2014-11-01', '2014-12-01'],
              dtype='datetime64[ns]', name='time', length=793, freq=None))</pre></div></input></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-a605210b-4beb-4064-82e3-7f669f362ee0" type="checkbox"/><label class="xr-section-summary" for="section-a605210b-4beb-4064-82e3-7f669f362ee0">Attributes: <span>(5)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>date_created :</span></dt><dd>2021-03-24T22:39:08+0000</dd><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>Title :</span></dt><dd>Water Security Indicator Model -- Global Land Data Assimilation System Data Set (WSIM-GLDAS), version 1.0: Monthly Grids</dd><dt><span>Institution :</span></dt><dd>NASA Socioeconomic Data and Applications Center (SEDAC), Center for International Earth Science Information Network (CIESIN) Columbia University</dd><dt><span>References :</span></dt><dd>Crowley, C., Baston, D., Brinks, J. 2020. Water Security Indicator Model -- Global Land Data Assimilation System Data Set (WSIM-GLDAS), version 1.0: Monthly Grids. Palisades, NY: NASA Socioeconomic Data and Applications Center.</dd></dl></div></li></ul></div></div></div>
</div>
<p>The output reveals that the dataset consists of five attributes: <code class="docutils literal notranslate"><span class="pre">deficit</span></code>,
<code class="docutils literal notranslate"><span class="pre">deficit_cause</span></code>, <code class="docutils literal notranslate"><span class="pre">surplus</span></code>, <code class="docutils literal notranslate"><span class="pre">surplus_cause</span></code>, and <code class="docutils literal notranslate"><span class="pre">both</span></code> (a combination
of <code class="docutils literal notranslate"><span class="pre">surpluses</span></code> and <code class="docutils literal notranslate"><span class="pre">deficits</span></code>. Additionally, it has three dimensions:
<code class="docutils literal notranslate"><span class="pre">longitude</span></code> and <code class="docutils literal notranslate"><span class="pre">latitude</span></code> (spatial extents on the x/y axes) and <code class="docutils literal notranslate"><span class="pre">time</span></code>
as the third dimension.</p>
<p>In total, this amounts to <strong>4020 individual</strong> raster layers (calculated as 5
attributes multiplied by <strong>804 time steps/months</strong>). This is a clear indication
of just how extensive and complex the dataset is, and further reinforces the
importance of efficient data handling.</p>
</section>
<section id="attribute-selection-of-reducing-complexity">
<h2>Attribute Selection of Reducing Complexity<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#attribute-selection-of-reducing-complexity"></a></h2>
<p>Now that we’ve loaded the dataset, let’s focus on reducing the size and
complexity of the data by selecting only the variables we need. This process is
known as <strong>Attribute Selection</strong>. In this example, we’ll focus on the
<code class="docutils literal notranslate"><span class="pre">deficit</span></code> variable, which represents drought conditions, and the <code class="docutils literal notranslate"><span class="pre">crs</span></code>
variable, which contains spatial reference information (i.e., coordinate
reference system).</p>
<p>Why leave out other variables? Well, this decision depends on the specific
goals of your analysis. Since we already know that this dataset covers
12-months, we can safely omit the integration variable, which tracks the time
period.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-2">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-3">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Subset the dataset to include only the 'deficit' and 'crs' (coordinate reference system)</span>
<span class="n">subset</span> <span class="o">=</span> <span class="n">wsim_gldas</span><span class="p">[[</span><span class="s2">"deficit"</span><span class="p">,</span> <span class="s2">"crs"</span><span class="p">]]</span>
<span class="n">subset</span>
</pre></div>
</div>
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 3GB
Dimensions:  (time: 793, lat: 600, lon: 1440)
Coordinates: (3)
Data variables: (2)
Attributes: (5)</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-b2d1f7fa-963f-4430-ab04-079fb12cbf03" type="checkbox"/><label class="xr-section-summary" for="section-b2d1f7fa-963f-4430-ab04-079fb12cbf03" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 793</li><li><span class="xr-has-index">lat</span>: 600</li><li><span class="xr-has-index">lon</span>: 1440</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-a28fe8c8-4c76-4642-aa91-fe36c0567bc3" type="checkbox"/><label class="xr-section-summary" for="section-a28fe8c8-4c76-4642-aa91-fe36c0567bc3">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-179.9 -179.6 ... 179.6 179.9</div><input class="xr-var-attrs-in" id="attrs-6463621d-e752-4485-9086-930bdc7d0561" type="checkbox"/><label for="attrs-6463621d-e752-4485-9086-930bdc7d0561" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-b397b1f7-f542-4e47-af06-0e1aa2f5e871" type="checkbox"/><label for="data-b397b1f7-f542-4e47-af06-0e1aa2f5e871" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>standard_name :</span></dt><dd>longitude</dd></dl></div><div class="xr-var-data"><pre>array([-179.875, -179.625, -179.375, ...,  179.375,  179.625,  179.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">89.88 89.62 89.38 ... -59.62 -59.88</div><input class="xr-var-attrs-in" id="attrs-46219313-cf06-4cc8-8802-117524a58814" type="checkbox"/><label for="attrs-46219313-cf06-4cc8-8802-117524a58814" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-180314b5-018c-4684-9ac6-9c444a19a910" type="checkbox"/><label for="data-180314b5-018c-4684-9ac6-9c444a19a910" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>standard_name :</span></dt><dd>latitude</dd></dl></div><div class="xr-var-data"><pre>array([ 89.875,  89.625,  89.375, ..., -59.375, -59.625, -59.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1948-12-01 ... 2014-12-01</div><input class="xr-var-attrs-in" disabled="" id="attrs-105da5af-9b5b-4ca6-800d-8a8cf280dde5" type="checkbox"/><label for="attrs-105da5af-9b5b-4ca6-800d-8a8cf280dde5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-2ac095ee-bf9b-4fef-bc72-0a3624d043ca" type="checkbox"/><label for="data-2ac095ee-bf9b-4fef-bc72-0a3624d043ca" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1948-12-01T00:00:00.000000000', '1949-01-01T00:00:00.000000000',
       '1949-02-01T00:00:00.000000000', ..., '2014-10-01T00:00:00.000000000',
       '2014-11-01T00:00:00.000000000', '2014-12-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-d5dc5151-d9ab-45d7-ac4c-164ecc7ac119" type="checkbox"/><label class="xr-section-summary" for="section-d5dc5151-d9ab-45d7-ac4c-164ecc7ac119">Data variables: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>deficit</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-3a1e4eea-c01c-44d7-bc20-8aedd9c4d751" type="checkbox"/><label for="attrs-3a1e4eea-c01c-44d7-bc20-8aedd9c4d751" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-e58fe097-08c8-4758-ac86-29e4eebc2cc0" type="checkbox"/><label for="data-e58fe097-08c8-4758-ac86-29e4eebc2cc0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Composite Deficit Index</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd></dl></div><div class="xr-var-data"><pre>[685152000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>crs</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-f1aeae44-da17-4fe0-b377-2f220b1aef75" type="checkbox"/><label for="attrs-f1aeae44-da17-4fe0-b377-2f220b1aef75" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-d1f23aea-71f1-4b89-871b-270693f206b1" type="checkbox"/><label for="data-d1f23aea-71f1-4b89-871b-270693f206b1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0</dd><dt><span>semi_major_axis :</span></dt><dd>6378137</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]</dd></dl></div><div class="xr-var-data"><pre>[793 values with dtype=int32]</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-da6c5e75-9a85-47a1-83be-5953018822c1" type="checkbox"/><label class="xr-section-summary" for="section-da6c5e75-9a85-47a1-83be-5953018822c1">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>lon</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-bb639c21-d236-454d-8a5d-970c3435f8fe" type="checkbox"><label for="index-bb639c21-d236-454d-8a5d-970c3435f8fe" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([-179.875, -179.625, -179.375, -179.125, -178.875, -178.625, -178.375,
       -178.125, -177.875, -177.625,
       ...
        177.625,  177.875,  178.125,  178.375,  178.625,  178.875,  179.125,
        179.375,  179.625,  179.875],
      dtype='float64', name='lon', length=1440))</pre></div></input></li><li class="xr-var-item"><div class="xr-index-name"><div>lat</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-31104722-3631-4f84-89b1-63fbdc769a14" type="checkbox"><label for="index-31104722-3631-4f84-89b1-63fbdc769a14" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([ 89.875,  89.625,  89.375,  89.125,  88.875,  88.625,  88.375,  88.125,
        87.875,  87.625,
       ...
       -57.625, -57.875, -58.125, -58.375, -58.625, -58.875, -59.125, -59.375,
       -59.625, -59.875],
      dtype='float64', name='lat', length=600))</pre></div></input></li><li class="xr-var-item"><div class="xr-index-name"><div>time</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-3ac79490-42c0-4a75-87c6-46c3072b92c8" type="checkbox"><label for="index-3ac79490-42c0-4a75-87c6-46c3072b92c8" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(DatetimeIndex(['1948-12-01', '1949-01-01', '1949-02-01', '1949-03-01',
               '1949-04-01', '1949-05-01', '1949-06-01', '1949-07-01',
               '1949-08-01', '1949-09-01',
               ...
               '2014-03-01', '2014-04-01', '2014-05-01', '2014-06-01',
               '2014-07-01', '2014-08-01', '2014-09-01', '2014-10-01',
               '2014-11-01', '2014-12-01'],
              dtype='datetime64[ns]', name='time', length=793, freq=None))</pre></div></input></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-733a74c0-aa89-4e5c-b810-f125a13577c6" type="checkbox"/><label class="xr-section-summary" for="section-733a74c0-aa89-4e5c-b810-f125a13577c6">Attributes: <span>(5)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>date_created :</span></dt><dd>2021-03-24T22:39:08+0000</dd><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>Title :</span></dt><dd>Water Security Indicator Model -- Global Land Data Assimilation System Data Set (WSIM-GLDAS), version 1.0: Monthly Grids</dd><dt><span>Institution :</span></dt><dd>NASA Socioeconomic Data and Applications Center (SEDAC), Center for International Earth Science Information Network (CIESIN) Columbia University</dd><dt><span>References :</span></dt><dd>Crowley, C., Baston, D., Brinks, J. 2020. Water Security Indicator Model -- Global Land Data Assimilation System Data Set (WSIM-GLDAS), version 1.0: Monthly Grids. Palisades, NY: NASA Socioeconomic Data and Applications Center.</dd></dl></div></li></ul></div></div><p>In this code block, we use double brackets to subset the dataset and
extract only the variables we’re interested in <span class="raw-html">—</span> <code class="docutils literal notranslate"><span class="pre">deficit</span></code>
and <code class="docutils literal notranslate"><span class="pre">crs</span></code>. This step is crucial for efficiently managing memory when
working with large datasets. By reducing the number of variables, we
make the data easier to handle, especially if you’re performing
intensive operations later on.</p>
<p>After subsetting the data, it’s always a good practice to inspect the
result to make sure everything looks as expected. When you print
<code class="docutils literal notranslate"><span class="pre">wsim_gldas</span></code> again, you should see that the dataset now contains only
two variables: <code class="docutils literal notranslate"><span class="pre">deficit</span></code> and <code class="docutils literal notranslate"><span class="pre">crs</span></code>. This reduction in variables
helps streamline the dataset and ensures that we’re only working with
the most relevant information.</p>
</div>
</div>
<p>By focusing on <strong>deficit</strong>, which is vital for understanding drought
conditions, and retaining the <strong>crs</strong> information for spatial analysis, we can
move forward confidently, knowing that we’ve optimized the dataset for our
needs.</p>
<p>This step-by-step guide not only reduces the dataset to a more manageable size
but also maintains the critical information needed for your analysis. The goal
here is to simplify the workflow while ensuring you have everything required to
proceed.</p>
</section>
<section id="time-selection-for-improved-data-efficiency">
<h2>Time Selection for Improved Data Efficiency<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#time-selection-for-improved-data-efficiency"></a></h2>
<p>In this section, we’ll delve into how to further refine the dataset by
selecting a specific time range that aligns with your analysis goals. Narrowing
down the temporal range helps reduce the overall size of the dataset, making it
more manageable and focused. This process will also allow us to focus on key
moments in the data, which is essential when analyzing time-series datasets.</p>
<section id="why-focus-on-a-specific-temporal-range">
<h3>Why Focus on a Specific Temporal Range?<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#why-focus-on-a-specific-temporal-range"></a></h3>
<p>Large datasets often contain data spanning many years, and while this can be
beneficial for certain analyses, it can also make the file unnecessarily large
and difficult to work with. By specifying a temporal range of interest, we can
isolate the most relevant portions of the dataset. In this case, we’re
interested in the period from <strong>December 2000</strong> to <strong>December 2014</strong>, and by
selecting data from these years, we make the file smaller and more manageable.</p>
<p>The dataset we’re using, <strong>WSIM-GLDAS</strong>, aggregates the <code class="docutils literal notranslate"><span class="pre">deficit</span></code> (drought)
variable over a 12-month period. This means that each time step in the dataset
represents an average of the deficit over the previous 12 months. As a result,
if we focus on the December months, we’ll obtain annual averages for the
deficit, which provides a clear picture of how drought conditions evolved year
by year.</p>
<p>Let’s dive into the step-by-step process for selecting this time range.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-4">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-5">
Python</label><div class="sd-tab-content docutils">
<p>To start, we need to create a list of dates corresponding to every
December between <strong>2000</strong> and <strong>2014</strong>. This will ensure that we’re
selecting a yearly snapshot of the drought <strong>deficit</strong> during this
period. We’ll achieve this using the powerful <strong>Pandas</strong> library, which
is excellent for handling time series data.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate a list of dates for December of each year from 2000 to 2014</span>
<span class="n">december_dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">"2000-12-01"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">"2014-12-01"</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"YS-DEC"</span><span class="p">)</span>
<span class="c1"># Subset the dataset to include only these December dates and</span>
<span class="c1"># plot the 'deficit' variable across the selected time steps</span>
<span class="n">december_subset</span> <span class="o">=</span> <span class="n">subset</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">december_dates</span><span class="p">)</span>
<span class="n">december_subset</span><span class="o">.</span><span class="n">time</span>
</pre></div>
</div>
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray 'time' (time: 15)&gt; Size: 120B
2000-12-01 2001-12-01 2002-12-01 2003-12-01 ... 2012-12-01 2013-12-01 2014-12-01
Coordinates: (1)</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name">'time'</div><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 15</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input class="xr-array-in" id="section-21ba0f7e-5ba3-412f-8d73-dd681089cacf" type="checkbox"/><label for="section-21ba0f7e-5ba3-412f-8d73-dd681089cacf" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-array-preview xr-preview"><span>2000-12-01 2001-12-01 2002-12-01 ... 2012-12-01 2013-12-01 2014-12-01</span></div><div class="xr-array-data"><pre>array(['2000-12-01T00:00:00.000000000', '2001-12-01T00:00:00.000000000',
       '2002-12-01T00:00:00.000000000', '2003-12-01T00:00:00.000000000',
       '2004-12-01T00:00:00.000000000', '2005-12-01T00:00:00.000000000',
       '2006-12-01T00:00:00.000000000', '2007-12-01T00:00:00.000000000',
       '2008-12-01T00:00:00.000000000', '2009-12-01T00:00:00.000000000',
       '2010-12-01T00:00:00.000000000', '2011-12-01T00:00:00.000000000',
       '2012-12-01T00:00:00.000000000', '2013-12-01T00:00:00.000000000',
       '2014-12-01T00:00:00.000000000'], dtype='datetime64[ns]')</pre></div></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-8861ccb9-951d-4156-acfb-04ffc6fad00f" type="checkbox"/><label class="xr-section-summary" for="section-8861ccb9-951d-4156-acfb-04ffc6fad00f">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">2000-12-01 ... 2014-12-01</div><input class="xr-var-attrs-in" disabled="" id="attrs-45ecc5e9-c4a7-4a3b-8c3a-bef3c994303c" type="checkbox"/><label for="attrs-45ecc5e9-c4a7-4a3b-8c3a-bef3c994303c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-0856f044-6c8b-43bc-916a-627e68904fb9" type="checkbox"/><label for="data-0856f044-6c8b-43bc-916a-627e68904fb9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2000-12-01T00:00:00.000000000', '2001-12-01T00:00:00.000000000',
       '2002-12-01T00:00:00.000000000', '2003-12-01T00:00:00.000000000',
       '2004-12-01T00:00:00.000000000', '2005-12-01T00:00:00.000000000',
       '2006-12-01T00:00:00.000000000', '2007-12-01T00:00:00.000000000',
       '2008-12-01T00:00:00.000000000', '2009-12-01T00:00:00.000000000',
       '2010-12-01T00:00:00.000000000', '2011-12-01T00:00:00.000000000',
       '2012-12-01T00:00:00.000000000', '2013-12-01T00:00:00.000000000',
       '2014-12-01T00:00:00.000000000'], dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-abf6f80f-5512-4cb2-82a3-f3e81906386b" type="checkbox"/><label class="xr-section-summary" for="section-abf6f80f-5512-4cb2-82a3-f3e81906386b">Indexes: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>time</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-b49f0706-68b5-4f84-af5d-971925de298d" type="checkbox"><label for="index-b49f0706-68b5-4f84-af5d-971925de298d" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(DatetimeIndex(['2000-12-01', '2001-12-01', '2002-12-01', '2003-12-01',
               '2004-12-01', '2005-12-01', '2006-12-01', '2007-12-01',
               '2008-12-01', '2009-12-01', '2010-12-01', '2011-12-01',
               '2012-12-01', '2013-12-01', '2014-12-01'],
              dtype='datetime64[ns]', name='time', freq=None))</pre></div></input></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-f5a074b9-691e-4ffc-a4d0-9890b623b2ad" type="checkbox"/><label class="xr-section-summary" for="section-f5a074b9-691e-4ffc-a4d0-9890b623b2ad" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>Now that we’ve generated the sequence of dates, the next step is to
apply this list to the dataset and select only the data for the
specified months. This is where we use
<a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.sel.html#xarray.DataArray.sel" title="(in xarray v2024.9.1.dev0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xarray.DataArray.sel()</span></code></a> method to subset the
dataset. By passing the list of dates, keeps, into the
<a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.sel.html#xarray.DataArray.sel" title="(in xarray v2024.9.1.dev0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xarray.DataArray.sel()</span></code></a> method, we’re telling
<a class="reference external" href="https://docs.xarray.dev/en/stable/index.html#module-xarray" title="(in xarray v2024.9.1.dev0)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xarray</span></code></a> to extract only the data for the
corresponding time steps. This reduces the time dimension of the
dataset to 15 time steps <span class="raw-html">—</span> one for each December from
<strong>2000</strong> to <strong>2014</strong>. This step is crucial in reducing the overall size
of the dataset while ensuring we retain the annual averages for the
deficit variable.</p>
<p>At this point, we’ve successfully reduced the dataset to focus on the
deficit variable over the desired time range (2000-2014). Now that we
have a more manageable dataset, it’s often helpful to visualize the
data. Visualizations can give you a clearer understanding of patterns
and trends, especially when dealing with time-series data related to
spatial variables like <code class="docutils literal notranslate"><span class="pre">deficit</span></code>.</p>
<p>We’ll use Xarray’s built-in plotting functionality to create a quick
visualization of the deficit over time.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">december_subset</span><span class="o">.</span><span class="n">deficit</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">col</span><span class="o">=</span><span class="s2">"time"</span><span class="p">,</span>
    <span class="n">col_wrap</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">"Reds_r"</span><span class="p">,</span>
    <span class="n">aspect</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">cbar_kwargs</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"orientation"</span><span class="p">:</span> <span class="s2">"vertical"</span><span class="p">,</span>
        <span class="s2">"shrink"</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"Deficit Anomaly"</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<img alt="../../../_images/wsim-world-map.png" src="../../../_images/wsim-world-map.png"/>
</div>
</div>
<p>Although we’ve already reduced the dataset significantly by focusing on a
single variable and a specific time range, there may still be situations where
you want to narrow it down even further. For example, you might only be
interested in analyzing a particular geographic region, such as a country or a
state. By limiting the spatial extent, you can make the dataset even smaller
and more targeted to your specific area of interest.</p>
<p>In future steps, we’ll explore how to subset the dataset spatially, allowing
you to focus on the regions that matter most for your analysis.</p>
<p>By specifying a temporal range and visualizing the deficit data, we’ve taken
important steps to optimize the dataset for analysis. This approach not only
reduces the size of the file, making it easier to handle, but also ensures that
we’re focusing on the most relevant time period. In the next steps, we can
explore how to further refine the dataset by limiting the spatial extent to
specific regions.</p>
</section>
</section>
<section id="spatial-selection-of-a-geographic-area-of-interest">
<h2>Spatial Selection of a Geographic Area of Interest<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#spatial-selection-of-a-geographic-area-of-interest"></a></h2>
<p>In data analysis, especially when working with spatial datasets, we often need
to focus on a specific geographic region. Whether it’s for better performance,
easier data handling, or simply because you’re interested in a particular area,
spatial selection is an essential tool.</p>
<p>In this case, we’ll be cropping our dataset, WSIM-GLDAS, to a specific
geographic region using the boundary of the United States and further refining
it to just Texas. This reduces the amount of data we’re working with, making it
smaller, easier to manage, and more focused for analysis.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Methods for Cropping Spatial Data</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-right" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<ul class="simple">
<li><p class="sd-card-text"><strong>Bounding Box.</strong> This method uses specific geographic coordinates
(longitude and latitude) that define the extent of the area you wish to
select. Example: You provide the xmin, ymin, xmax, and ymax coordinates
to specify the rectangular area you want to crop.</p></li>
<li><p class="sd-card-text"><strong>Raster Object.</strong> You can also use another raster dataset to crop your
target dataset by matching its extent to that of the provided raster.</p></li>
<li><p class="sd-card-text"><strong>Vector Boundary.</strong> Another common method is to crop the dataset using a
vector boundary <span class="raw-html">—</span> a shapefile or GeoJSON that defines a
geographic or political boundary (e.g., country, state, province).</p></li>
</ul>
</div>
</details><p>In this example, we will use a vector boundary in GeoJSON format to crop our
raster data. This method is particularly useful when working with well-defined
areas like states or countries.</p>
<p>To begin, we need to obtain a vector boundary that represents the geographic
area we are interested in. We will use the geoBoundaries API to fetch this
data. The geoBoundaries API allows us to access vector boundaries for countries
and their subdivisions, such as states or provinces. This data can be retrieved
in various formats, including GeoJSON, which is a widely used format for
geographic data.</p>
<p>For this example, we’ll be working with the United States and specifically
focusing on Administrative Level 1 (ADM1), which corresponds to the State
level.</p>
<p>The API URL structure is as follows:
<a class="reference external" href="https://www.geoboundaries.org/api/current/gbOpen/ISO3/LEVEL/">https://www.geoboundaries.org/api/current/gbOpen/ISO3/LEVEL/</a></p>
<ul class="simple">
<li><p><strong>ISO3.</strong> This is the three-letter country code (for the U.S., it’s “USA”).</p></li>
<li><p><strong>LEVEL.</strong> This defines the administrative level (in this case, “ADM1” for
states).</p></li>
</ul>
<section id="id13">
<h3>Why Focus on a Specific Temporal Range?<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#id13"></a></h3>
<p>Large datasets often contain data spanning many years, and while this can be
beneficial for certain analyses, it can also make the file unnecessarily large
and difficult to work with. By specifying a temporal range of interest, we can
isolate the most relevant portions of the dataset. In this case, we’re
interested in the period from <strong>December 2000</strong> to <strong>December 2014</strong>, and by
selecting data from these years, we make the file smaller and more manageable.</p>
<p>The dataset we’re using, <strong>WSIM-GLDAS</strong>, aggregates the <code class="docutils literal notranslate"><span class="pre">deficit</span></code> (drought)
variable over a 12-month period. This means that each time step in the dataset
represents an average of the deficit over the previous 12 months. As a result,
if we focus on the December months, we’ll obtain annual averages for the
deficit, which provides a clear picture of how drought conditions evolved year
by year.</p>
<p>Let’s dive into the step-by-step process for selecting this time range.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-3" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-6">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-3" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-7">
Python</label><div class="sd-tab-content docutils">
<p>We’ll use the requests library to access this data and the geopandas
library to handle the GeoJSON file.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">us_boundaries</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">"https://www.geoboundaries.org/api/current/gbOpen/USA/ADM1/"</span>
<span class="p">)</span>
<span class="n">us_boundaries</span> <span class="o">=</span> <span class="n">us_boundaries</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
<p>The JSON response from the geoBoundaries API contains a variety of
information, but what we need is the direct link to the GeoJSON file.
This link is found in the gjDownloadURL field (typically located in
item 29 of the response).</p>
<p>We’ll now use geopandas to load and visualize the GeoJSON data.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">us_boundaries</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">us_boundaries</span><span class="p">[</span><span class="s2">"gjDownloadURL"</span><span class="p">])</span>
<span class="n">us_boundaries</span> <span class="o">=</span> <span class="n">us_boundaries</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"shape"</span><span class="p">,</span> <span class="s2">"State "</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">us_map</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">([</span><span class="mi">43</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">],</span> <span class="n">tiles</span><span class="o">=</span><span class="s2">"cartodbpositron"</span><span class="p">,</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">folium</span><span class="o">.</span><span class="n">GeoJson</span><span class="p">(</span>
    <span class="n">us_boundaries</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"USA"</span><span class="p">,</span>
    <span class="n">zoom_on_click</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">marker</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">icon</span><span class="o">=</span><span class="s2">"star"</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">GeoJsonTooltip</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]),</span>
    <span class="n">popup</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">GeoJsonPopup</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]),</span>
    <span class="n">style_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"red"</span><span class="p">,</span>
        <span class="s2">"color"</span><span class="p">:</span> <span class="s2">"red"</span><span class="p">,</span>
        <span class="s2">"weight"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">us_map</span><span class="p">)</span>
<span class="n">us_map</span>
</pre></div>
</div>
<iframe height="600" id="folium-map" src="../../../_static/map/water/us_boundary.html" width="100%"></iframe><p>The GeoJSON we retrieved contains the boundaries for all U.S. states
and territories, including places like Alaska, Hawaii, and Puerto Rico.
For this demonstration, we’re going to focus on the contiguous United
States (i.e., the 48 mainland states), so we’ll need to exclude certain
regions from our dataset.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Exclude territories and states outside of the contiguous USA (CONUS)</span>
<span class="n">excluded_areas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"Alaska"</span><span class="p">,</span>
    <span class="s2">"Hawaii"</span><span class="p">,</span>
    <span class="s2">"American Samoa"</span><span class="p">,</span>
    <span class="s2">"Puerto Rico"</span><span class="p">,</span>
    <span class="s2">"Guam"</span><span class="p">,</span>
    <span class="s2">"Northern Mariana Islands"</span><span class="p">,</span>
    <span class="s2">"United States Virgin Islands"</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Keep only the continental USA boundaries</span>
<span class="n">contiguous_us_boundaries</span> <span class="o">=</span> <span class="n">us_boundaries</span><span class="p">[</span><span class="o">~</span><span class="n">us_boundaries</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">excluded_areas</span><span class="p">)]</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the contiguous US boundaries for a clearer visual</span>
<span class="n">folium</span><span class="o">.</span><span class="n">GeoJson</span><span class="p">(</span>
    <span class="n">contiguous_us_boundaries</span><span class="p">,</span>
    <span class="n">zoom_on_click</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">marker</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">icon</span><span class="o">=</span><span class="s2">"star"</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">GeoJsonTooltip</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]),</span>
    <span class="n">popup</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">GeoJsonPopup</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]),</span>
    <span class="n">style_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"orange"</span><span class="p">,</span>
        <span class="s2">"color"</span><span class="p">:</span> <span class="s2">"orange"</span><span class="p">,</span>
        <span class="s2">"weight"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">us_map</span><span class="p">)</span>
<span class="n">us_map</span>
</pre></div>
</div>
<iframe height="600" id="folium-map" src="../../../_static/map/water/contiguous_us_boundary.html" width="100%"></iframe><p>For more detailed analysis, we might want to focus on a specific state.
In this example, let’s focus on Texas.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract and visualize the boundary for a specific state (e.g., Texas)</span>
<span class="n">texas_boundary</span> <span class="o">=</span> <span class="n">contiguous_us_boundaries</span><span class="p">[</span><span class="n">contiguous_us_boundaries</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"Texas"</span><span class="p">)]</span>
</pre></div>
</div>
<p>This snippet extracts Texas by filtering the shapeName column for any
entries that contain the word “Texas”. We can then visualize just the
Texas boundary.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot Texas boundary for a clearer visual</span>
<span class="n">folium</span><span class="o">.</span><span class="n">GeoJson</span><span class="p">(</span>
    <span class="n">texas_boundary</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"Texas"</span><span class="p">,</span>
    <span class="n">zoom_on_click</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">GeoJsonTooltip</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]),</span>
    <span class="n">popup</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">GeoJsonPopup</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]),</span>
    <span class="n">style_function</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"fillColor"</span><span class="p">:</span> <span class="s2">"green"</span><span class="p">,</span>
        <span class="s2">"color"</span><span class="p">:</span> <span class="s2">"green"</span><span class="p">,</span>
        <span class="s2">"weight"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">us_map</span><span class="p">)</span>
<span class="n">us_map</span>
</pre></div>
</div>
<iframe height="600" id="folium-map" src="../../../_static/map/water/texas_boundary.html" width="100%"></iframe><p>Now that we have the vector boundary for Texas, we can use it to crop
the WSIM-GLDAS dataset. This process is called spatial clipping, where
the raster data is cropped to the extent of the Texas boundary. For
this, we’ll use rioxarray, a library built on top of Xarray and
Rasterio that provides geospatial raster operations.</p>
<p>First, we need to ensure the dataset has the correct Coordinate
Reference System (CRS), which we can set to EPSG: 4326, a common
geographic coordinate system.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">december_subset</span> <span class="o">=</span> <span class="n">december_subset</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">"EPSG:4326"</span><span class="p">)</span>
</pre></div>
</div>
<p>Now that we’ve successfully clipped the dataset to the extent of Texas,
we can visualize the results. We’ll plot the last time step in the
dataset (December 2014) and overlay it with the Texas boundary to
verify our processing.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wsim_gldas_texas</span> <span class="o">=</span> <span class="n">december_subset</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">texas_boundary</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wsim_gldas_texas</span><span class="o">.</span><span class="n">deficit</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">col</span><span class="o">=</span><span class="s2">"time"</span><span class="p">,</span>
    <span class="n">col_wrap</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">"Reds_r"</span><span class="p">,</span>
    <span class="n">aspect</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">cbar_kwargs</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"orientation"</span><span class="p">:</span> <span class="s2">"horizontal"</span><span class="p">,</span>
        <span class="s2">"shrink"</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="s2">"label"</span><span class="p">:</span> <span class="s2">"Deficit Anomaly"</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<img alt="../../../_images/wsim-texas.png" src="../../../_images/wsim-texas.png"/>
<p>This plot provides a clear view of the deficit anomaly within Texas
over time, with color variations showing the severity of drought
conditions.</p>
<p>Finally, we can save both the processed raster data (WSIM-GLDAS) and
the vector boundary (Texas) to disk. This is useful for sharing with
colleagues, conducting further analysis, or storing the data for future
use.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wsim_gldas_texas</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s2">"wsim_gldas_texas.nc"</span><span class="p">)</span>
<span class="n">texas_boundary</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s2">"texas_boundary.geojson"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The resulting dataset is significantly smaller (1.6 MB compared to the original
1.7 GB), making it much more manageable for further analysis, especially in
cloud environments or workshops.</p>
<p>This completes the process of spatially selecting and processing your data,
allowing you to focus on the region and variable of interest.</p>
</section>
</section>
<section id="advanced-visualizations-and-data-integrations">
<h2>Advanced Visualizations and Data Integrations<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#advanced-visualizations-and-data-integrations"></a></h2>
<p>Now that we’ve introduced the basics of manipulating and visualizing
WSIM-GLDAS, we can explore more advanced visualizations and data integrations.
Let’s clear the workspace and start over again with the same WSIM-GLDAS
Composite Anomaly Twelve-Month Return Period we used earlier. We will spatially
subset the data to cover only the Continental United States (CONUSA) which will
help to minimize our memory footprint. We can further reduce our memory
overhead by reading in just the variable we want to analyze. In this instance
we can read in just the deficit attribute from the WSIM-GLDAS Composite Anomaly
Twelve-Month Return Period file, rather than reading the entire NetCDF with all
of its attributes.</p>
<p>For this exercise, we can quickly walk through similar pre-processing steps we
performed earlier in this lesson and then move on to more advanced
visualizations and integrations. Read the original 12-month integration data
back in, filter with a list of dates for each December spanning 2000-2014, and
then crop the raster data with the boundary of the contiguous United States
using our geoBoundaries object.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-4" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-8">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-4" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-9">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wsim_gldas</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">"composite_12mo.nc, engine = "</span><span class="n">h5netcdf</span><span class="s2">")</span>

<span class="c1"># list of dates we want to keep</span>
<span class="n">keeps</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">"2000-12-01"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">"2014-12-01"</span><span class="p">,</span> <span class="n">freq</span> <span class="o">=</span> <span class="s2">"YS-DEC"</span><span class="p">)</span>

<span class="c1"># subset for the dates</span>
<span class="n">wsim_gldas</span> <span class="o">=</span> <span class="n">wsim_gldas</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">keeps</span><span class="p">)</span>

<span class="c1"># subset for the variable of interest and the crs info</span>
<span class="n">wsim_gldas</span> <span class="o">=</span> <span class="n">wsim_gldas</span><span class="p">[[</span><span class="s2">"deficit"</span><span class="p">,</span> <span class="s2">"crs"</span><span class="p">]]</span>

<span class="c1"># give the time variable pretty names</span>
<span class="n">wsim_gldas</span> <span class="o">=</span> <span class="n">wsim_gldas</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2015</span><span class="p">)))</span>

<span class="c1"># clip wsim_gldas</span>
<span class="n">wsim_gldas</span> <span class="o">=</span> <span class="n">wsim_gldas</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">"epsg: 4326"</span><span class="p">)</span>
<span class="n">wsim_gldas</span> <span class="o">=</span> <span class="n">wsim_gldas</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">usa</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<p>Double check the object information.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check the basic information again</span>
<span class="n">wsim_gldas</span>
</pre></div>
</div>
<p>You will want to review the printout to make sure it looks okay.</p>
<ul class="simple">
<li><p>Does it contain the variables you were expecting?</p></li>
<li><p>Do the values for the variables seem plausible?</p></li>
</ul>
<p>Other basic descriptive analyses are useful to verify and understand
your data. One of these is to produce a frequency distribution (also
known as a histogram), which is reviewed below.</p>
</div>
</div>
</section>
<section id="annual-conusa-time-series">
<h2>Annual CONUSA Time Series<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#annual-conusa-time-series"></a></h2>
<p>The basic data properties reviewed in the previous step are useful for
exploratory data analysis, but we should perform further inspection. We can
start our visual exploration of annual drought in the CONUSA by creating a map
illustrating the deficit return period for each of the years in the WSIM-GLDAS
object.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-5" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-10">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-5" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-11">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check visuals</span>
<span class="n">wsim_gldas</span><span class="o">.</span><span class="n">deficit</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"lon"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"lat"</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="s2">"time"</span><span class="p">,</span>
    <span class="n">col_wrap</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="s2">"Reds_r"</span><span class="p">,</span>
    <span class="n">aspect</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=-</span><span class="mi">60</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">cbar_kwargs</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">"orientation"</span><span class="p">:</span><span class="s2">"horizontal"</span><span class="p">,</span>
        <span class="s2">"shrink"</span><span class="p">:</span><span class="mf">0.6</span><span class="p">,</span>
        <span class="s2">"label"</span><span class="p">:</span><span class="s2">"Deficit Anomaly"</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<img alt="../../../_images/wsim-deficit-usa.png" src="../../../_images/wsim-deficit-usa.png"/>
<p>This visualization shows that there were several significant drought
events (as indicated by dark red deficit return-period values)
throughout 2000-2014. Significant drought events included the southeast
in 2000, the southwest in 2002, the majority of the western 3rd in
2007, Texas-Oklahoma in 2011, Montana-Wyoming-Colorado in 2012, and the
entirety of the California coast in 2014. The droughts of 2012 and 2011
are particularly severe and widespread with return periods greater than
50 years covering multiple states. Based on historical norms, we should
only expect droughts this strong every 50-60 years!</p>
</div>
</div>
</section>
<section id="monthly-time-series">
<h2>Monthly Time Series<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#monthly-time-series"></a></h2>
<p>We can get a more detailed look at these drought events by using the 1-month
composite WSIM-GLDAS dataset and cropping the data to a smaller spatial extent
matching one of the events we’ve noted in the previous plot. Let’s take a
closer look at the 2014 California drought.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-12" name="sd-tab-set-6" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-12">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-13" name="sd-tab-set-6" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-13">
Python</label><div class="sd-tab-content docutils">
<p>In order to limit the amount of computing memory required for the
operation, we will first clear items from the in-memory workspace and
then reload a smaller composite file, we’ll start by removing the
12-month composite object.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># remove the large wsim object from the environment</span>
<span class="k">del</span> <span class="n">wsim_gldas</span>
</pre></div>
</div>
<p>Now let’s load the composite 1-month file from SEDAC into the
workspace. The attributes and dimensions will be the same as the
12-month integration so we’ll skip ahead to directly loading in the
deficit variable without performing a check on the structure using
proxy = TRUE.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wsim_gldas_1mo</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">"composite_1mo.nc"</span><span class="p">,</span> <span class="n">engine</span> <span class="o">=</span> <span class="s2">"h5netcdf"</span><span class="p">)</span>
<span class="n">wsim_gldas_1mo</span>
</pre></div>
</div>
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 14GB
Dimensions:                       (lon: 1440, lat: 600, time: 804)
Coordinates: (3)
Data variables: (7)
Attributes: (5)</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-321e8332-6daa-41f3-b48e-e3724668eef3" type="checkbox"/><label class="xr-section-summary" for="section-321e8332-6daa-41f3-b48e-e3724668eef3" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lon</span>: 1440</li><li><span class="xr-has-index">lat</span>: 600</li><li><span class="xr-has-index">time</span>: 804</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-9d476c37-0e7d-4a12-b758-de34a942c065" type="checkbox"/><label class="xr-section-summary" for="section-9d476c37-0e7d-4a12-b758-de34a942c065">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-179.9 -179.6 ... 179.6 179.9</div><input class="xr-var-attrs-in" id="attrs-1dde0a48-22e4-4f47-b102-afc30e7c8fa6" type="checkbox"/><label for="attrs-1dde0a48-22e4-4f47-b102-afc30e7c8fa6" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-ee5e7b1a-a2eb-44f0-a0db-57ebc273e6e2" type="checkbox"/><label for="data-ee5e7b1a-a2eb-44f0-a0db-57ebc273e6e2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>standard_name :</span></dt><dd>longitude</dd></dl></div><div class="xr-var-data"><pre>array([-179.875, -179.625, -179.375, ...,  179.375,  179.625,  179.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">89.88 89.62 89.38 ... -59.62 -59.88</div><input class="xr-var-attrs-in" id="attrs-1811c170-fe03-4397-8ce3-e0b54f8ab29d" type="checkbox"/><label for="attrs-1811c170-fe03-4397-8ce3-e0b54f8ab29d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-7359a2b7-cf91-4ad1-9050-dac9a3852fed" type="checkbox"/><label for="data-7359a2b7-cf91-4ad1-9050-dac9a3852fed" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>standard_name :</span></dt><dd>latitude</dd></dl></div><div class="xr-var-data"><pre>array([ 89.875,  89.625,  89.375, ..., -59.375, -59.625, -59.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1948-01-01 ... 2014-12-01</div><input class="xr-var-attrs-in" disabled="" id="attrs-a2d7e0fe-a6a9-4a3f-b46a-181e8f8c3816" type="checkbox"/><label for="attrs-a2d7e0fe-a6a9-4a3f-b46a-181e8f8c3816" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-32b17181-2e93-4f14-a09e-d5152065197d" type="checkbox"/><label for="data-32b17181-2e93-4f14-a09e-d5152065197d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1948-01-01T00:00:00.000000000', '1948-02-01T00:00:00.000000000',
       '1948-03-01T00:00:00.000000000', ..., '2014-10-01T00:00:00.000000000',
       '2014-11-01T00:00:00.000000000', '2014-12-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-20658f96-d3c4-445e-8027-34beb606746e" type="checkbox"/><label class="xr-section-summary" for="section-20658f96-d3c4-445e-8027-34beb606746e">Data variables: <span>(7)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>deficit</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-60cdc399-5464-48f9-97a4-bdceae3e402b" type="checkbox"/><label for="attrs-60cdc399-5464-48f9-97a4-bdceae3e402b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-a6beb192-4453-4f80-af15-302d1c45a2e9" type="checkbox"/><label for="data-a6beb192-4453-4f80-af15-302d1c45a2e9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Composite Deficit Index</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd></dl></div><div class="xr-var-data"><pre>[694656000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>deficit_cause</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-4448c85e-9de3-4349-b14a-9e9dd9909186" type="checkbox"/><label for="attrs-4448c85e-9de3-4349-b14a-9e9dd9909186" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-534f0fce-a4ae-4f2b-aa21-6cb2831100db" type="checkbox"/><label for="data-534f0fce-a4ae-4f2b-aa21-6cb2831100db" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Cause of Deficit</dd><dt><span>flag_values :</span></dt><dd>[1 2 3]</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd><dt><span>flag_meanings :</span></dt><dd>neg_petme soil_moisture runoff_accum</dd></dl></div><div class="xr-var-data"><pre>[694656000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>surplus</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-269c0e4d-a60c-4823-ad33-460b6caa9aa8" type="checkbox"/><label for="attrs-269c0e4d-a60c-4823-ad33-460b6caa9aa8" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-a88f8efa-d715-40ed-ba38-33ef770e5b0a" type="checkbox"/><label for="data-a88f8efa-d715-40ed-ba38-33ef770e5b0a" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Composite Surplus Index</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd></dl></div><div class="xr-var-data"><pre>[694656000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>surplus_cause</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-a1d7eae8-dfe3-4ae6-8cba-1a9fe38091c3" type="checkbox"/><label for="attrs-a1d7eae8-dfe3-4ae6-8cba-1a9fe38091c3" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-4d4a953a-4cad-45b6-90de-7bb8fc65ad53" type="checkbox"/><label for="data-4d4a953a-4cad-45b6-90de-7bb8fc65ad53" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Cause of Surplus</dd><dt><span>flag_values :</span></dt><dd>[1 2]</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd><dt><span>flag_meanings :</span></dt><dd>runoff runoff_accum</dd></dl></div><div class="xr-var-data"><pre>[694656000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>both</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-a3b2a796-53dc-4f90-947b-178608e1d15f" type="checkbox"/><label for="attrs-a3b2a796-53dc-4f90-947b-178608e1d15f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-46ead1f5-72c0-4554-aa13-e80e81cfb617" type="checkbox"/><label for="data-46ead1f5-72c0-4554-aa13-e80e81cfb617" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Composite Combined Surplus &amp; Deficit Index</dd><dt><span>threshold :</span></dt><dd>3</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd></dl></div><div class="xr-var-data"><pre>[694656000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>crs</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-c9a7e893-baeb-4f18-8d9a-18b8cd92bb38" type="checkbox"/><label for="attrs-c9a7e893-baeb-4f18-8d9a-18b8cd92bb38" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-3182d5b1-3df4-4fe5-a692-40fa0705796b" type="checkbox"/><label for="data-3182d5b1-3df4-4fe5-a692-40fa0705796b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0</dd><dt><span>semi_major_axis :</span></dt><dd>6378137</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]</dd></dl></div><div class="xr-var-data"><pre>[804 values with dtype=int32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>integration_period_end_month</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">&lt;U6</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-a6817163-b6f4-432d-aaa4-bfdf04a9b888" type="checkbox"/><label for="attrs-a6817163-b6f4-432d-aaa4-bfdf04a9b888" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-96df6df2-d11f-4522-8432-e29263dac4e9" type="checkbox"/><label for="data-96df6df2-d11f-4522-8432-e29263dac4e9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>YYYYMM</dd></dl></div><div class="xr-var-data"><pre>[804 values with dtype=&lt;U6]</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-b890961e-50f5-4afe-ab14-5e6a5c470c0c" type="checkbox"/><label class="xr-section-summary" for="section-b890961e-50f5-4afe-ab14-5e6a5c470c0c">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>lon</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-48c50dad-8940-442b-9153-f61e2d864c3d" type="checkbox"><label for="index-48c50dad-8940-442b-9153-f61e2d864c3d" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([-179.875, -179.625, -179.375, -179.125, -178.875, -178.625, -178.375,
       -178.125, -177.875, -177.625,
       ...
        177.625,  177.875,  178.125,  178.375,  178.625,  178.875,  179.125,
        179.375,  179.625,  179.875],
      dtype='float64', name='lon', length=1440))</pre></div></input></li><li class="xr-var-item"><div class="xr-index-name"><div>lat</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-d7f2d6ca-8768-4431-a5b5-40d569f30616" type="checkbox"><label for="index-d7f2d6ca-8768-4431-a5b5-40d569f30616" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([ 89.875,  89.625,  89.375,  89.125,  88.875,  88.625,  88.375,  88.125,
        87.875,  87.625,
       ...
       -57.625, -57.875, -58.125, -58.375, -58.625, -58.875, -59.125, -59.375,
       -59.625, -59.875],
      dtype='float64', name='lat', length=600))</pre></div></input></li><li class="xr-var-item"><div class="xr-index-name"><div>time</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-fbff4889-8fa5-4e46-9c87-b6917f89816b" type="checkbox"><label for="index-fbff4889-8fa5-4e46-9c87-b6917f89816b" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(DatetimeIndex(['1948-01-01', '1948-02-01', '1948-03-01', '1948-04-01',
               '1948-05-01', '1948-06-01', '1948-07-01', '1948-08-01',
               '1948-09-01', '1948-10-01',
               ...
               '2014-03-01', '2014-04-01', '2014-05-01', '2014-06-01',
               '2014-07-01', '2014-08-01', '2014-09-01', '2014-10-01',
               '2014-11-01', '2014-12-01'],
              dtype='datetime64[ns]', name='time', length=804, freq=None))</pre></div></input></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-a5547495-eba2-4a8f-86ab-a47cf9b1df31" type="checkbox"/><label class="xr-section-summary" for="section-a5547495-eba2-4a8f-86ab-a47cf9b1df31">Attributes: <span>(5)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>date_created :</span></dt><dd>2021-03-25T04:20:33+0000</dd><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>Title :</span></dt><dd>Water Security Indicator Model -- Global Land Data Assimilation System Data Set (WSIM-GLDAS), version 1.0: Monthly Grids</dd><dt><span>Institution :</span></dt><dd>NASA Socioeconomic Data and Applications Center (SEDAC), Center for International Earth Science Information Network (CIESIN) Columbia University</dd><dt><span>References :</span></dt><dd>Crowley, C., Baston, D., Brinks, J. 2020. Water Security Indicator Model -- Global Land Data Assimilation System Data Set (WSIM-GLDAS), version 1.0: Monthly Grids. Palisades, NY: NASA Socioeconomic Data and Applications Center.</dd></dl></div></li></ul></div></div><div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">keeps</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">"2014-01-01"</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">"2014-12-01"</span><span class="p">,</span> <span class="n">freq</span> <span class="o">=</span> <span class="s2">"MS"</span><span class="p">)</span>
<span class="n">wsim_gldas_1mo</span> <span class="o">=</span> <span class="n">wsim_gldas_1mo</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span> <span class="n">keeps</span><span class="p">)</span>
<span class="n">wsim_gldas_1mo</span> <span class="o">=</span> <span class="n">wsim_gldas_1mo</span><span class="p">[[</span><span class="s2">"deficit"</span><span class="p">,</span> <span class="s2">"crs"</span><span class="p">]]</span>
<span class="n">wsim_gldas_1mo</span>
</pre></div>
</div>
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewbox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewbox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
html[data-theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt; Size: 41MB
Dimensions:  (time: 12, lat: 600, lon: 1440)
Coordinates: (3)
Data variables: (2)
Attributes: (5)</pre><div class="xr-wrap" style="display:none"><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input class="xr-section-summary-in" disabled="" id="section-29fac943-e2bc-4f19-9481-6cb26204f455" type="checkbox"/><label class="xr-section-summary" for="section-29fac943-e2bc-4f19-9481-6cb26204f455" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 12</li><li><span class="xr-has-index">lat</span>: 600</li><li><span class="xr-has-index">lon</span>: 1440</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-c7f47053-e5f7-48da-becd-969fa6ebf687" type="checkbox"/><label class="xr-section-summary" for="section-c7f47053-e5f7-48da-becd-969fa6ebf687">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">-179.9 -179.6 ... 179.6 179.9</div><input class="xr-var-attrs-in" id="attrs-44486be1-2adc-4fa9-a0c8-99af24a57bdd" type="checkbox"/><label for="attrs-44486be1-2adc-4fa9-a0c8-99af24a57bdd" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-62df38c3-afe1-4e80-9af6-5375a7a21169" type="checkbox"/><label for="data-62df38c3-afe1-4e80-9af6-5375a7a21169" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>standard_name :</span></dt><dd>longitude</dd></dl></div><div class="xr-var-data"><pre>array([-179.875, -179.625, -179.375, ...,  179.375,  179.625,  179.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">89.88 89.62 89.38 ... -59.62 -59.88</div><input class="xr-var-attrs-in" id="attrs-a7da15a4-dd9c-4e28-b202-379bcc93a64b" type="checkbox"/><label for="attrs-a7da15a4-dd9c-4e28-b202-379bcc93a64b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-ee825cf1-cd39-41a7-a100-e9fc4c08da84" type="checkbox"/><label for="data-ee825cf1-cd39-41a7-a100-e9fc4c08da84" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>standard_name :</span></dt><dd>latitude</dd></dl></div><div class="xr-var-data"><pre>array([ 89.875,  89.625,  89.375, ..., -59.375, -59.625, -59.875])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">2014-01-01 ... 2014-12-01</div><input class="xr-var-attrs-in" disabled="" id="attrs-a87d70ec-5282-4a22-b42b-e40b2e649fe5" type="checkbox"/><label for="attrs-a87d70ec-5282-4a22-b42b-e40b2e649fe5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-6cfdcc82-781e-4435-a82a-99a3dcf27f7c" type="checkbox"/><label for="data-6cfdcc82-781e-4435-a82a-99a3dcf27f7c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['2014-01-01T00:00:00.000000000', '2014-02-01T00:00:00.000000000',
       '2014-03-01T00:00:00.000000000', '2014-04-01T00:00:00.000000000',
       '2014-05-01T00:00:00.000000000', '2014-06-01T00:00:00.000000000',
       '2014-07-01T00:00:00.000000000', '2014-08-01T00:00:00.000000000',
       '2014-09-01T00:00:00.000000000', '2014-10-01T00:00:00.000000000',
       '2014-11-01T00:00:00.000000000', '2014-12-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-3add86a9-de8f-48c3-9c9f-9ab232f417bf" type="checkbox"/><label class="xr-section-summary" for="section-3add86a9-de8f-48c3-9c9f-9ab232f417bf">Data variables: <span>(2)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>deficit</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-85b2bb1e-da90-4246-b0c9-79c04c559ce3" type="checkbox"/><label for="attrs-85b2bb1e-da90-4246-b0c9-79c04c559ce3" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-6dd67bd9-e43b-4607-ba98-cdc7ba4bb13e" type="checkbox"/><label for="data-6dd67bd9-e43b-4607-ba98-cdc7ba4bb13e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Composite Deficit Index</dd><dt><span>grid_mapping :</span></dt><dd>crs</dd></dl></div><div class="xr-var-data"><pre>[10368000 values with dtype=float32]</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>crs</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int32</div><div class="xr-var-preview xr-preview">...</div><input class="xr-var-attrs-in" id="attrs-c0344f32-38b8-42d9-a106-cf4e02c8d98e" type="checkbox"/><label for="attrs-c0344f32-38b8-42d9-a106-cf4e02c8d98e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"></use></svg></label><input class="xr-var-data-in" id="data-23e6b787-e45b-450f-8ae7-99bf37060fb8" type="checkbox"/><label for="data-23e6b787-e45b-450f-8ae7-99bf37060fb8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>grid_mapping_name :</span></dt><dd>latitude_longitude</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0</dd><dt><span>semi_major_axis :</span></dt><dd>6378137</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>spatial_ref :</span></dt><dd>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]]</dd></dl></div><div class="xr-var-data"><pre>[12 values with dtype=int32]</pre></div></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-77025ac6-baff-4f82-b252-d439a26fe788" type="checkbox"/><label class="xr-section-summary" for="section-77025ac6-baff-4f82-b252-d439a26fe788">Indexes: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-index-name"><div>lon</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-42859481-64bd-43ab-a679-d40c3c0de7a2" type="checkbox"><label for="index-42859481-64bd-43ab-a679-d40c3c0de7a2" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([-179.875, -179.625, -179.375, -179.125, -178.875, -178.625, -178.375,
       -178.125, -177.875, -177.625,
       ...
        177.625,  177.875,  178.125,  178.375,  178.625,  178.875,  179.125,
        179.375,  179.625,  179.875],
      dtype='float64', name='lon', length=1440))</pre></div></input></li><li class="xr-var-item"><div class="xr-index-name"><div>lat</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-339b182c-ba61-4def-9168-e5ae4216693c" type="checkbox"><label for="index-339b182c-ba61-4def-9168-e5ae4216693c" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(Index([ 89.875,  89.625,  89.375,  89.125,  88.875,  88.625,  88.375,  88.125,
        87.875,  87.625,
       ...
       -57.625, -57.875, -58.125, -58.375, -58.625, -58.875, -59.125, -59.375,
       -59.625, -59.875],
      dtype='float64', name='lat', length=600))</pre></div></input></li><li class="xr-var-item"><div class="xr-index-name"><div>time</div></div><div class="xr-index-preview">PandasIndex</div><div></div><input class="xr-index-data-in" id="index-ff5f0991-72cf-47ec-99e5-ee38789df6f3" type="checkbox"><label for="index-ff5f0991-72cf-47ec-99e5-ee38789df6f3" title="Show/Hide index repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"></use></svg></label><div class="xr-index-data"><pre>PandasIndex(DatetimeIndex(['2014-01-01', '2014-02-01', '2014-03-01', '2014-04-01',
               '2014-05-01', '2014-06-01', '2014-07-01', '2014-08-01',
               '2014-09-01', '2014-10-01', '2014-11-01', '2014-12-01'],
              dtype='datetime64[ns]', name='time', freq=None))</pre></div></input></li></ul></div></li><li class="xr-section-item"><input class="xr-section-summary-in" id="section-43867731-9fa2-48ea-b1b7-9a5994fe81fd" type="checkbox"/><label class="xr-section-summary" for="section-43867731-9fa2-48ea-b1b7-9a5994fe81fd">Attributes: <span>(5)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>date_created :</span></dt><dd>2021-03-25T04:20:33+0000</dd><dt><span>Conventions :</span></dt><dd>CF-1.6</dd><dt><span>Title :</span></dt><dd>Water Security Indicator Model -- Global Land Data Assimilation System Data Set (WSIM-GLDAS), version 1.0: Monthly Grids</dd><dt><span>Institution :</span></dt><dd>NASA Socioeconomic Data and Applications Center (SEDAC), Center for International Earth Science Information Network (CIESIN) Columbia University</dd><dt><span>References :</span></dt><dd>Crowley, C., Baston, D., Brinks, J. 2020. Water Security Indicator Model -- Global Land Data Assimilation System Data Set (WSIM-GLDAS), version 1.0: Monthly Grids. Palisades, NY: NASA Socioeconomic Data and Applications Center.</dd></dl></div></li></ul></div></div><p>Now we have 12 rasters with monthly data for 2014. Let’s zoom in on
California and see how this drought progressed over the course of the
year.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># isolate only the california border</span>
<span class="n">california</span> <span class="o">=</span> <span class="n">contiguous_us_boundaries</span><span class="p">[</span>
    <span class="n">contiguous_us_boundaries</span><span class="p">[</span><span class="s2">"State Name"</span><span class="p">]</span>
    <span class="o">.</span><span class="n">str</span>
    <span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">"California"</span><span class="p">)</span>
<span class="p">]</span>
<span class="n">wsim_gldas_1mo</span> <span class="o">=</span> <span class="n">wsim_gldas_1mo</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">"epsg: 4326"</span><span class="p">)</span>
<span class="n">wsim_gldas_california</span> <span class="o">=</span> <span class="n">wsim_gldas_1mo</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">california</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="c1"># give the time dimension pretty labels</span>
<span class="n">wsim_gldas_california</span> <span class="o">=</span> <span class="n">wsim_gldas_california</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">(</span>
    <span class="n">time</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">calendar</span><span class="o">.</span><span class="n">month_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="p">)</span>

<span class="c1"># plot it</span>
<span class="n">wsim_gldas_california</span><span class="o">.</span><span class="n">deficit</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"lon"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"lat"</span><span class="p">,</span>
    <span class="n">col</span><span class="o">=</span><span class="s2">"time"</span><span class="p">,</span>
    <span class="n">col_wrap</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">cmap</span> <span class="o">=</span> <span class="s2">"Reds_r"</span><span class="p">,</span>
    <span class="n">aspect</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="n">size</span> <span class="o">=</span><span class="mf">2.5</span><span class="p">,</span>
    <span class="n">vmin</span> <span class="o">=</span> <span class="o">-</span><span class="mi">60</span><span class="p">,</span>
    <span class="n">vmax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">cbar_kwargs</span> <span class="o">=</span>  <span class="p">{</span>
        <span class="s2">"orientation"</span><span class="p">:</span> <span class="s2">"vertical"</span><span class="p">,</span>
        <span class="s2">"shrink"</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
        <span class="s2">"label"</span><span class="p">:</span><span class="s2">"Deficit Anomaly"</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<img alt="../../../_images/wsim-california.png" src="../../../_images/wsim-california.png"/>
<p>This series of maps shows a startling picture. California faced massive
water deficits throughout the state in January and February. This was
followed by water deficits in the western half of the state in
May-August. Although northern and eastern California saw some relief by
September, southwest California continued to see deficits through
December.</p>
</div>
</div>
</section>
<section id="zonal-summaries">
<h2>Zonal Summaries<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#zonal-summaries"></a></h2>
<p>To this point we’ve described the 2014 California drought by examining the
state as a whole. Although we have a sense of what’s happening in different
cities or counties by looking at the maps, they do not provide quantitative
summaries of local areas.</p>
<p>Zonal statistics are one way to summarize the cells of a raster layer that lie
within the boundary of another data layer (which may be in either raster or
vector format). For example, aggregating deficit return periods with another
raster depicting land cover type or a vector boundary (shapefile) of countries,
states, or counties, will produce descriptive statistics by that new layer.
These statistics could include the sum, mean, median, standard deviation, and
range.</p>
<p>For this section, we begin by calculating the mean deficit return period within
California counties. First, we retrieve a vector dataset of California counties
from the geoBoundaries API. Since geoBoundaries does not attribute which
counties belong to which states, we utilize a spatial operation called
intersect to select only those counties in California.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-14" name="sd-tab-set-7" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-14">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-15" name="sd-tab-set-7" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-15">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">usa_counties</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s2">"https://www.geoboundaries.org/api/current/gbOpen/USA/ADM2/"</span>
<span class="p">)</span>

<span class="c1"># parse the request for the data</span>
<span class="n">usa_counties</span> <span class="o">=</span> <span class="n">usa_counties</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">usa_counties</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">usa_counties</span><span class="p">[</span><span class="s2">"gjDownloadURL"</span><span class="p">])</span>

<span class="c1"># intersect california state level with usa counties</span>

<span class="n">california_counties</span> <span class="o">=</span> <span class="n">usa_counties</span><span class="o">.</span><span class="n">overlay</span><span class="p">(</span><span class="n">california</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">"intersection"</span><span class="p">)</span>
<span class="n">california_counties</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../../../_images/wsim-california-boundary.png" src="../../../_images/wsim-california-boundary.png"/>
<p>The output of that intersection looks as expected. As noted above, in
general a visual and/or tabular check on your data layers is always a
good idea. If you expect 50 counties in a given state, you should see
50 counties resulting from your intersection of your two layers, etc.
You may want to be on the look out for too few (such as an island area
that may be in one layer but not the other) or too many counties (such
as those that intersect with a neighboring state).</p>
<p>We will perform our zonal statistics using the exactextractr package
(Daniel Baston 2023). It is the fastest, most accurate, and most
flexible zonal statistics tool for the R programming language.</p>
<p>Now let’s carry out the extraction and check the January output.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">exactextract</span> <span class="kn">import</span> <span class="n">exact_extract</span>

<span class="c1"># run the extraction</span>
<span class="n">cc_summaries</span> <span class="o">=</span> <span class="n">exact_extract</span><span class="p">(</span>
    <span class="n">wsim_gldas_california</span><span class="o">.</span><span class="n">deficit</span><span class="p">,</span>
    <span class="n">california_counties</span><span class="p">,</span>
    <span class="s2">"mean"</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">"pandas"</span><span class="p">,</span>
    <span class="n">include_cols</span><span class="o">=</span><span class="s2">"shapeName"</span><span class="p">,</span>
    <span class="n">include_geom</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># make the column names pretty</span>
<span class="n">col_names</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">"county"</span><span class="p">],</span> <span class="n">calendar</span><span class="o">.</span><span class="n">month_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="p">[</span><span class="s2">"geometry"</span><span class="p">]]</span>
<span class="n">col_names</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">col_names</span><span class="p">,</span> <span class="p">[])</span>
<span class="n">cc_summaries</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">col_names</span>
</pre></div>
</div>
<p>exactextractr returns summary statistics in the same order of the input
boundary file, therefore we can join the California county names to the
exactextract summary statistics output for visualization. We can take a
quick look at the first 10 counties to see their mean deficit return
period for January-June.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check first 10 rows</span>
<span class="n">cc_summaries</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>county</th>
<th>January</th>
<th>February</th>
<th>March</th>
<th>April</th>
<th>May</th>
<th>June</th>
<th>July</th>
<th>August</th>
<th>September</th>
<th>October</th>
<th>November</th>
<th>December</th>
<th>geometry</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>Alpine</td>
<td>-41.762840</td>
<td>-16.325728</td>
<td>-13.645101</td>
<td>-8.343272</td>
<td>-28.199846</td>
<td>-29.179775</td>
<td>-25.325485</td>
<td>-14.808689</td>
<td>-14.582643</td>
<td>-4.376792</td>
<td>-4.113872</td>
<td>-5.714340</td>
<td>POLYGON ((-119.57953 38.70561, -119.59866 38.6...</td>
</tr>
<tr>
<th>1</th>
<td>Mohave</td>
<td>-41.926029</td>
<td>-7.661513</td>
<td>-9.152430</td>
<td>-14.206533</td>
<td>-60.000000</td>
<td>-10.475436</td>
<td>-6.967257</td>
<td>-7.795761</td>
<td>-2.742674</td>
<td>-4.661378</td>
<td>-6.620070</td>
<td>-11.090995</td>
<td>MULTIPOLYGON (((-114.48678 34.71911, -114.4860...</td>
</tr>
<tr>
<th>2</th>
<td>Tuolumne</td>
<td>-46.240213</td>
<td>-19.108027</td>
<td>-16.389606</td>
<td>-8.347591</td>
<td>-42.286756</td>
<td>-24.053486</td>
<td>-22.873270</td>
<td>-26.276834</td>
<td>-29.332736</td>
<td>-5.976634</td>
<td>-3.198179</td>
<td>-2.996842</td>
<td>POLYGON ((-119.88476 38.35619, -119.86968 38.3...</td>
</tr>
<tr>
<th>3</th>
<td>Tehama</td>
<td>-57.917277</td>
<td>-49.567668</td>
<td>-23.608668</td>
<td>-21.017951</td>
<td>-28.339994</td>
<td>-46.608842</td>
<td>-42.693579</td>
<td>-33.756402</td>
<td>-8.716129</td>
<td>-1.808360</td>
<td>-7.166282</td>
<td>-5.475178</td>
<td>POLYGON ((-121.49789 40.43201, -121.47404 40.4...</td>
</tr>
<tr>
<th>4</th>
<td>Trinity</td>
<td>-59.978625</td>
<td>-45.856119</td>
<td>-45.540983</td>
<td>-25.803624</td>
<td>-43.663656</td>
<td>-60.000000</td>
<td>-60.000000</td>
<td>-46.338076</td>
<td>-2.438062</td>
<td>2.108574</td>
<td>-6.474706</td>
<td>-7.222751</td>
<td>POLYGON ((-123.05144 40.26815, -123.01859 40.2...</td>
</tr>
<tr>
<th>5</th>
<td>Curry</td>
<td>-60.000000</td>
<td>-56.224870</td>
<td>-26.244996</td>
<td>-4.247256</td>
<td>-9.093711</td>
<td>-54.969276</td>
<td>-60.000000</td>
<td>-60.000000</td>
<td>-2.081964</td>
<td>2.505597</td>
<td>-5.030906</td>
<td>-5.104263</td>
<td>MULTIPOLYGON (((-124.12621 41.997, -124.21162 ...</td>
</tr>
<tr>
<th>6</th>
<td>San Benito</td>
<td>-60.000000</td>
<td>-60.000000</td>
<td>-55.619817</td>
<td>-23.027860</td>
<td>-60.000000</td>
<td>-60.000000</td>
<td>-60.000000</td>
<td>-59.993260</td>
<td>-60.000000</td>
<td>-59.984706</td>
<td>-37.763730</td>
<td>-4.135725</td>
<td>POLYGON ((-121.62947 36.91169, -121.60737 36.8...</td>
</tr>
<tr>
<th>7</th>
<td>Josephine</td>
<td>-60.000000</td>
<td>-22.464207</td>
<td>-25.885935</td>
<td>-14.265512</td>
<td>-13.829797</td>
<td>-32.273193</td>
<td>-60.000000</td>
<td>-43.312246</td>
<td>-12.886647</td>
<td>1.938376</td>
<td>-6.264188</td>
<td>-8.443334</td>
<td>MULTIPOLYGON (((-123.81401 41.9951, -123.82149...</td>
</tr>
<tr>
<th>8</th>
<td>Sierra</td>
<td>-19.329339</td>
<td>-18.765692</td>
<td>-11.403096</td>
<td>-11.497562</td>
<td>-18.052833</td>
<td>-27.915046</td>
<td>-27.949060</td>
<td>-14.572026</td>
<td>-6.030163</td>
<td>-5.473642</td>
<td>-1.692186</td>
<td>-30.551402</td>
<td>POLYGON ((-120.00937 39.44512, -120.03522 39.4...</td>
</tr>
<tr>
<th>9</th>
<td>El Dorado</td>
<td>-44.008753</td>
<td>-17.298188</td>
<td>-12.065714</td>
<td>-9.303977</td>
<td>-33.611919</td>
<td>-28.847394</td>
<td>-25.674937</td>
<td>-12.958253</td>
<td>-5.670928</td>
<td>-6.029936</td>
<td>-2.770664</td>
<td>-10.949467</td>
<td>POLYGON ((-119.90433 38.93333, -119.88766 38.9...</td>
</tr>
</tbody>
</table>
</div><p>As we expected after seeing the raw WSIM-GLDAS raster, there are
significant widespread deficits. We can get a better visual by
constructing a choropleth using the county vector boundaries.</p>
</div>
</div>
</section>
<section id="county-choropleths">
<h2>County Choropleths<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#county-choropleths"></a></h2>
<p>Now that we’ve inspected the raw data we can make a choropleth out of the mean
deficit return period data</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-16" name="sd-tab-set-8" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-16">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-17" name="sd-tab-set-8" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-17">
Python</label><div class="sd-tab-content docutils">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># setup the panels for the figures</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span>
    <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">"w"</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># convert list of 2D axis positions into a 1d list of number 1-12</span>
<span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">"Monthly California Deficits for 2014"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.05</span><span class="p">)</span>

<span class="c1"># loop through columns to make the plot for each month</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">month</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cc_summaries</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">13</span><span class="p">]):</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">month</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span> <span class="mi">11</span><span class="p">)</span>
    <span class="n">cc_summaries</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="n">month</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s2">"Reds_r"</span><span class="p">)</span>
    <span class="n">california_counties</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">"black"</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"none"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.25</span>
    <span class="p">)</span>

<span class="c1"># loop through again and turn off the axes for a cleaner map</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axs</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">"off"</span><span class="p">)</span>

<span class="n">patch_col</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">collections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">patch_col</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"Deficit Anomaly"</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../../_images/wsim-california-choropleth.png" src="../../../_images/wsim-california-choropleth.png"/>
<p>Due to the widespread water deficits in the raw data, the mean values
do not appear much different from the raw deficit raster layer,
however, choropleth maps, also called thematic maps, can make it easier
for users to survey the landscape by visualizing familiar places (like
counties) that place themselves and their lived experiences alongside
the data.</p>
<p>While this paints a striking picture of widespread water deficits, how
many people are affected by this drought? Although the land area
appears rather large, if one is not familiar with the distribution of
population and urban centers in California it can be difficult to get a
sense of the direct human impact. (This is partly because more populous
locations are usually represented by smaller land areas and the less
populous locations are usually represented by large administrative
boundaries containing much more land area). Normalizing a given theme
by land area may be something an analyst wants to do but we cover
another approach below.</p>
</div>
</div>
</section>
<section id="integrating-population-data">
<h2>Integrating Population Data<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link" href="#integrating-population-data"></a></h2>
<p>Gridded Population of the World (GPW) is a data collection from SEDAC that
models the distribution of the global human population as counts and densities
in a raster format (Center For International Earth Science Information
Network-CIESIN-Columbia University 2018).We will take full advantage of
exactextractr to integrate across WSIM-GLDAS, geoBoundaries, and GPW. To begin,
we need to download the 15-minute resolution (roughly 30 square kilometer at
the equator) population density data for the year 2015 from GPW. This version
of GPW most closely matches our time period (2014) and the resolution of
WSIM-GLDAS (0.25 degrees). Although in many applications one might choose to
use GPW’s population count data layers, because we are using exactextractr we
can achieve more accurate results (especially along coastlines) by using
population density in conjunction with land area estimates from the
exactextractr package.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-18" name="sd-tab-set-9" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="r-programming" for="sd-tab-item-18">
R-Programming <span class="raw-html"><span class="status-badge beta">Beta</span></span></label><div class="sd-tab-content docutils">
<p>…</p>
</div>
<input id="sd-tab-item-19" name="sd-tab-set-9" type="radio"/>
<label class="sd-tab-label" data-sync-group="programming-language" data-sync-id="python" for="sd-tab-item-19">
Python</label><div class="sd-tab-content docutils">
<p>Load in the population count layer.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read in GPW with rioxarray</span>
<span class="n">gpw</span> <span class="o">=</span> <span class="n">rio</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="s2">"gpw_v4_population_count_rev11_2015_15_min.tif"</span><span class="p">)</span>
</pre></div>
</div>
<p>For this example we’ll classify the WSIM-GLDAS deficit return period
raster layer into eight categories. Binning the data will make it
easier to manage the output and interpret the results.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># list the class breaks</span>
<span class="n">wsim_bins</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>

<span class="c1"># classify the wsim layer with the established breaks</span>
<span class="n">wsim_class</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">apply_ufunc</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">digitize</span><span class="p">,</span>
    <span class="n">wsim_gldas_1mo</span><span class="p">,</span>
    <span class="n">wsim_bins</span><span class="p">)</span>
</pre></div>
</div>
<p>In our previous example, we used exactextractr’s built-in ‘mean’
function, but we can also pass custom functions to exactextractr that
will carry out several operations at once as well. The following code
could be combined into a single function passed to exactextractr, but
it is presented here as multiple functions in order to follow along
more easily. You can read more about exactextractr arguments on the
package help guide. The key arguments to be aware of are the calls to:</p>
<ol class="arabic simple">
<li><p>[‘coverage’, ‘values’, ‘weights’]: These are the 3 operations we’re
requesting be calculated. coverage calculates the corresponding area
of the WSIM-GLDAS raster cell that is covered by the California
boundary, values returns the value of the WSIM cell covered by the
border, and weights returns the population count weight we supplied
in the next argument.</p></li>
<li><p>weights = gpw: summarizes each WSIM-GLDAS cell’s deficit return
period with the corresponding population count value.</p></li>
</ol>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># run the extraction</span>
<span class="n">cal_wsim_gpw</span> <span class="o">=</span> <span class="n">exact_extract</span><span class="p">(</span>
    <span class="n">wsim_class</span><span class="o">.</span><span class="n">deficit</span><span class="p">,</span>
    <span class="n">california_counties</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">"coverage"</span><span class="p">,</span> <span class="s2">"values"</span><span class="p">,</span> <span class="s2">"weights"</span><span class="p">],</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">"pandas"</span><span class="p">,</span>
    <span class="n">include_geom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">weights</span><span class="o">=</span><span class="n">gpw</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This returns a DataFrame with a row for every county in the
california_counties layer we passed to exact_extract.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check the first few rows</span>
<span class="n">cal_wsim_gpw</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>band_1_coverage</th>
<th>band_2_coverage</th>
<th>band_3_coverage</th>
<th>band_4_coverage</th>
<th>band_5_coverage</th>
<th>band_6_coverage</th>
<th>band_7_coverage</th>
<th>band_8_coverage</th>
<th>band_9_coverage</th>
<th>band_10_coverage</th>
<th>...</th>
<th>band_3_weights</th>
<th>band_4_weights</th>
<th>band_5_weights</th>
<th>band_6_weights</th>
<th>band_7_weights</th>
<th>band_8_weights</th>
<th>band_9_weights</th>
<th>band_10_weights</th>
<th>band_11_weights</th>
<th>band_12_weights</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>[5.243542545940727e-05, 0.363015353679657, 0.0...</td>
<td>...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
<td>[11718.642578125, 33362.7265625, 20356.484375,...</td>
</tr>
<tr>
<th>1</th>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>[5.183805815156539e-11, 9.799367398954928e-05,...</td>
<td>...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
<td>[19699.185546875, 21581.478515625, 41436.62109...</td>
</tr>
<tr>
<th>2</th>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>[0.01140472013503313, 0.5333179831504822, 0.55...</td>
<td>...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
<td>[3108.652587890625, 218.21519470214844, 2.9919...</td>
</tr>
<tr>
<th>3</th>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>[0.03276188299059868, 0.33793187141418457, 0.4...</td>
<td>...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
<td>[363.4409484863281, 135.38462829589844, 990.64...</td>
</tr>
<tr>
<th>4</th>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>[0.24912063777446747, 0.0036622267216444016, 0...</td>
<td>...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
<td>[88.7540512084961, 12151.6591796875, 30.048315...</td>
</tr>
<tr>
<th>5</th>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>[7.440718036377802e-05, 1.1325451851007529e-05]</td>
<td>...</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
<td>[25774.646484375, 727.9356079101562]</td>
</tr>
</tbody>
</table>
<p>6 rows × 36 columns</p>
</div><p>In addition to a row for each WSIM-GLDAS raster cell covered by the
california boundary, there are 36 columns we need to decipher. Each
column is prefixed by band_&lt;number&gt;_. The 12 bands represent the 12
months of WSIM-GLDAS data we passed. The 12 bands are replicated 3
times; resulting in 36 columns. Each set of 12 bands represent the 3
operations we requested summaries for ([‘coverage’, ‘values’,
‘weights’]). To complicate things further, each cell contains a list
with multiple values. This is because most counties overlap multiple
WSIM-GLDAS cells. We need to disaggregate the nested lists of values
before proceeding further.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create list of columns to unnest</span>
<span class="n">explode_cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">cal_wsim_gpw</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="c1"># unnest the column value lists</span>
<span class="n">cal_wsim_gpw</span> <span class="o">=</span> <span class="n">cal_wsim_gpw</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="n">explode_cols</span><span class="p">)</span>
<span class="c1"># check the results</span>
<span class="n">cal_wsim_gpw</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>band_1_coverage</th>
<th>band_2_coverage</th>
<th>band_3_coverage</th>
<th>band_4_coverage</th>
<th>band_5_coverage</th>
<th>band_6_coverage</th>
<th>band_7_coverage</th>
<th>band_8_coverage</th>
<th>band_9_coverage</th>
<th>band_10_coverage</th>
<th>...</th>
<th>band_3_weights</th>
<th>band_4_weights</th>
<th>band_5_weights</th>
<th>band_6_weights</th>
<th>band_7_weights</th>
<th>band_8_weights</th>
<th>band_9_weights</th>
<th>band_10_weights</th>
<th>band_11_weights</th>
<th>band_12_weights</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>0.000052</td>
<td>0.000052</td>
<td>0.000052</td>
<td>0.000052</td>
<td>0.000052</td>
<td>0.000052</td>
<td>0.000052</td>
<td>0.000052</td>
<td>0.000052</td>
<td>0.000052</td>
<td>...</td>
<td>11718.642578</td>
<td>11718.642578</td>
<td>11718.642578</td>
<td>11718.642578</td>
<td>11718.642578</td>
<td>11718.642578</td>
<td>11718.642578</td>
<td>11718.642578</td>
<td>11718.642578</td>
<td>11718.642578</td>
</tr>
<tr>
<th>0</th>
<td>0.363015</td>
<td>0.363015</td>
<td>0.363015</td>
<td>0.363015</td>
<td>0.363015</td>
<td>0.363015</td>
<td>0.363015</td>
<td>0.363015</td>
<td>0.363015</td>
<td>0.363015</td>
<td>...</td>
<td>33362.726562</td>
<td>33362.726562</td>
<td>33362.726562</td>
<td>33362.726562</td>
<td>33362.726562</td>
<td>33362.726562</td>
<td>33362.726562</td>
<td>33362.726562</td>
<td>33362.726562</td>
<td>33362.726562</td>
</tr>
<tr>
<th>0</th>
<td>0.068331</td>
<td>0.068331</td>
<td>0.068331</td>
<td>0.068331</td>
<td>0.068331</td>
<td>0.068331</td>
<td>0.068331</td>
<td>0.068331</td>
<td>0.068331</td>
<td>0.068331</td>
<td>...</td>
<td>20356.484375</td>
<td>20356.484375</td>
<td>20356.484375</td>
<td>20356.484375</td>
<td>20356.484375</td>
<td>20356.484375</td>
<td>20356.484375</td>
<td>20356.484375</td>
<td>20356.484375</td>
<td>20356.484375</td>
</tr>
<tr>
<th>0</th>
<td>0.263593</td>
<td>0.263593</td>
<td>0.263593</td>
<td>0.263593</td>
<td>0.263593</td>
<td>0.263593</td>
<td>0.263593</td>
<td>0.263593</td>
<td>0.263593</td>
<td>0.263593</td>
<td>...</td>
<td>192.583374</td>
<td>192.583374</td>
<td>192.583374</td>
<td>192.583374</td>
<td>192.583374</td>
<td>192.583374</td>
<td>192.583374</td>
<td>192.583374</td>
<td>192.583374</td>
<td>192.583374</td>
</tr>
<tr>
<th>0</th>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>...</td>
<td>298.508392</td>
<td>298.508392</td>
<td>298.508392</td>
<td>298.508392</td>
<td>298.508392</td>
<td>298.508392</td>
<td>298.508392</td>
<td>298.508392</td>
<td>298.508392</td>
<td>298.508392</td>
</tr>
<tr>
<th>0</th>
<td>0.617599</td>
<td>0.617599</td>
<td>0.617599</td>
<td>0.617599</td>
<td>0.617599</td>
<td>0.617599</td>
<td>0.617599</td>
<td>0.617599</td>
<td>0.617599</td>
<td>0.617599</td>
<td>...</td>
<td>2315.501465</td>
<td>2315.501465</td>
<td>2315.501465</td>
<td>2315.501465</td>
<td>2315.501465</td>
<td>2315.501465</td>
<td>2315.501465</td>
<td>2315.501465</td>
<td>2315.501465</td>
<td>2315.501465</td>
</tr>
<tr>
<th>0</th>
<td>0.06764</td>
<td>0.06764</td>
<td>0.06764</td>
<td>0.06764</td>
<td>0.06764</td>
<td>0.06764</td>
<td>0.06764</td>
<td>0.06764</td>
<td>0.06764</td>
<td>0.06764</td>
<td>...</td>
<td>218.215195</td>
<td>218.215195</td>
<td>218.215195</td>
<td>218.215195</td>
<td>218.215195</td>
<td>218.215195</td>
<td>218.215195</td>
<td>218.215195</td>
<td>218.215195</td>
<td>218.215195</td>
</tr>
<tr>
<th>0</th>
<td>0.442568</td>
<td>0.442568</td>
<td>0.442568</td>
<td>0.442568</td>
<td>0.442568</td>
<td>0.442568</td>
<td>0.442568</td>
<td>0.442568</td>
<td>0.442568</td>
<td>0.442568</td>
<td>...</td>
<td>2.991935</td>
<td>2.991935</td>
<td>2.991935</td>
<td>2.991935</td>
<td>2.991935</td>
<td>2.991935</td>
<td>2.991935</td>
<td>2.991935</td>
<td>2.991935</td>
<td>2.991935</td>
</tr>
<tr>
<th>0</th>
<td>0.360957</td>
<td>0.360957</td>
<td>0.360957</td>
<td>0.360957</td>
<td>0.360957</td>
<td>0.360957</td>
<td>0.360957</td>
<td>0.360957</td>
<td>0.360957</td>
<td>0.360957</td>
<td>...</td>
<td>34.219231</td>
<td>34.219231</td>
<td>34.219231</td>
<td>34.219231</td>
<td>34.219231</td>
<td>34.219231</td>
<td>34.219231</td>
<td>34.219231</td>
<td>34.219231</td>
<td>34.219231</td>
</tr>
<tr>
<th>1</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>19699.185547</td>
<td>19699.185547</td>
<td>19699.185547</td>
<td>19699.185547</td>
<td>19699.185547</td>
<td>19699.185547</td>
<td>19699.185547</td>
<td>19699.185547</td>
<td>19699.185547</td>
<td>19699.185547</td>
</tr>
</tbody>
</table>
<p>10 rows × 36 columns</p>
</div><p>Now we have a single row for each unique WSIM-GLDAS/California County
combination. The original row indices corresponding to the order of the
counties in the california_county layer are replicated for the number
of cells the county overlapped. In the first 10 rows we see that the
first county (0) overlapped 9 WSIM-GLDAS cells (there are 9 rows with a
0 index).</p>
<p>We will need to perform a few more processing steps to prepare this
DataFrame for a time series visualization integrating all of the data.
First we’ll replace the band prefixes with calendar months names. Then,
we will use the pd.melt function to transform the data from wide format
to long format in order to produce a visualization in plotnine.</p>
<p>There’s not a simple way to perform pattern based melts in pandas so
we’ll perform these operations on each of the 3 operations
([‘coverage’, ‘values’, ‘weights’]) separately and then bind them back
together.</p>
<p>First the coverage.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select just columns with word "coverage" in them</span>
<span class="n">cal_wsim_cov</span> <span class="o">=</span> <span class="n">cal_wsim_gpw</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="s2">"coverage"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># rename them for months</span>
<span class="n">cal_wsim_cov</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="n">month_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

<span class="c1"># melt them and create new columns; month and coverage</span>
<span class="n">cal_wsim_cov</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">cal_wsim_cov</span><span class="p">,</span> <span class="n">var_name</span><span class="o">=</span><span class="s2">"month"</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">"coverage"</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Now the values.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select just columns with word "coverage" in them</span>
<span class="n">cal_wsim_val</span> <span class="o">=</span> <span class="n">cal_wsim_gpw</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="s2">"values"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># rename them for months</span>
<span class="n">cal_wsim_val</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="n">month_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

<span class="c1"># melt them and create new columns; month and wsim class</span>
<span class="n">cal_wsim_val</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">cal_wsim_val</span><span class="p">,</span> <span class="n">var_name</span><span class="o">=</span><span class="s2">"month"</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">"wsim_class"</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Lastly the density.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select just columns with word "coverage" in them</span>
<span class="n">cal_wsim_weight</span> <span class="o">=</span> <span class="n">cal_wsim_gpw</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="s2">"weight"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># rename them for months</span>
<span class="n">cal_wsim_weight</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">calendar</span><span class="o">.</span><span class="n">month_name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

<span class="c1"># melt them and create new columns; month and population count</span>
<span class="n">cal_wsim_weight</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">cal_wsim_weight</span><span class="p">,</span> <span class="n">var_name</span><span class="o">=</span><span class="s2">"month"</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">"cell_pop_count"</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Put them back together. The rows are all in the same order as the
counties and months so we don’t have to perform a proper merge; just
bind them back together.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># concactenate them back together</span>
<span class="n">cal_summaries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
    <span class="p">[</span><span class="n">cal_wsim_cov</span><span class="p">,</span>                      <span class="c1"># just the coverages values</span>
    <span class="n">cal_wsim_val</span><span class="p">[</span><span class="s2">"wsim_class"</span><span class="p">],</span>         <span class="c1"># just the class values</span>
    <span class="n">cal_wsim_weight</span><span class="p">[</span><span class="s2">"cell_pop_count"</span><span class="p">]],</span> <span class="c1"># just the pop count values</span>
    <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>

<span class="n">cal_summaries</span>
</pre></div>
</div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>month</th>
<th>coverage</th>
<th>wsim_class</th>
<th>cell_pop_count</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>January</td>
<td>0.000052</td>
<td>5</td>
<td>11718.642578</td>
</tr>
<tr>
<th>1</th>
<td>January</td>
<td>0.363015</td>
<td>6</td>
<td>33362.726562</td>
</tr>
<tr>
<th>2</th>
<td>January</td>
<td>0.068331</td>
<td>7</td>
<td>20356.484375</td>
</tr>
<tr>
<th>3</th>
<td>January</td>
<td>0.263593</td>
<td>6</td>
<td>192.583374</td>
</tr>
<tr>
<th>4</th>
<td>January</td>
<td>1.0</td>
<td>7</td>
<td>298.508392</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>15907</th>
<td>December</td>
<td>0.08602</td>
<td>2</td>
<td>788672.6875</td>
</tr>
<tr>
<th>15908</th>
<td>December</td>
<td>0.00022</td>
<td>5</td>
<td>2462.314941</td>
</tr>
<tr>
<th>15909</th>
<td>December</td>
<td>0.001785</td>
<td>5</td>
<td>8885.547852</td>
</tr>
<tr>
<th>15910</th>
<td>December</td>
<td>0.00063</td>
<td>4</td>
<td>25215.951172</td>
</tr>
<tr>
<th>15911</th>
<td>December</td>
<td>0.000264</td>
<td>4</td>
<td>396.317535</td>
</tr>
</tbody>
</table>
<p>15912 rows × 4 columns</p>
</div><p>Now we have a simplified DataFrame in long format where each row
represents a unique county/month/WSIM cell combination. The first row
details the the first county passed from california_counties (index 0),
in the January WSIM-GLDAS layer, covering 0.000052 of a WSIM cell that
was class 5 (defict between -20 and -40), which overlayed a GPW
population count cell with 1,1717.64 people.</p>
<p>We can estimate the number of people represented by each
county/month/WSIM cell combination by multiplying the coverage fraction
by the population count.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># multiply</span>
<span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"wsim_class_pop"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"coverage"</span><span class="p">]</span> <span class="o">*</span> <span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"cell_pop_count"</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># round so we don't have fractions of people</span>

<span class="n">cal_summaries</span><span class="o">.</span><span class="n">wsim_class_pop</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"wsim_class_pop"</span><span class="p">]</span>
    <span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">"float"</span><span class="p">)</span>
    <span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># check the values</span>
<span class="n">cal_summaries</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>month</th>
<th>coverage</th>
<th>wsim_class</th>
<th>cell_pop_count</th>
<th>wsim_class_pop</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>January</td>
<td>0.000052</td>
<td>5</td>
<td>11718.642578</td>
<td>1.0</td>
</tr>
<tr>
<th>1</th>
<td>January</td>
<td>0.363015</td>
<td>6</td>
<td>33362.726562</td>
<td>12111.0</td>
</tr>
<tr>
<th>2</th>
<td>January</td>
<td>0.068331</td>
<td>7</td>
<td>20356.484375</td>
<td>1391.0</td>
</tr>
<tr>
<th>3</th>
<td>January</td>
<td>0.263593</td>
<td>6</td>
<td>192.583374</td>
<td>51.0</td>
</tr>
<tr>
<th>4</th>
<td>January</td>
<td>1.0</td>
<td>7</td>
<td>298.508392</td>
<td>299.0</td>
</tr>
</tbody>
</table>
</div><p>To estimate the number of people in each unique month/WSIM class
combination we’ll summarize by group with the pd.groupby() function.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># group by month and class and reset the index</span>
<span class="n">cal_summaries</span> <span class="o">=</span> <span class="n">cal_summaries</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">"month"</span><span class="p">,</span> <span class="s2">"wsim_class"</span><span class="p">])[</span><span class="s2">"wsim_class_pop"</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</pre></div>
</div>
<p>Ultimately we want to calculate the fraction of the population in each
WSIM-GLDAS class so we need to get the total population to divide into
the WSIM class population.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sum the population by month</span>
<span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"month_pop"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cal_summaries</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">"month"</span><span class="p">])[</span><span class="s2">"wsim_class_pop"</span><span class="p">]</span>
    <span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s2">"sum"</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># divide the class total by month sum to get the fraction</span>
<span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"wsim_class_frac"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"wsim_class_pop"</span><span class="p">]</span> <span class="o">/</span> <span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"month_pop"</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># check the values</span>
<span class="n">cal_summaries</span>
</pre></div>
</div>
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>month</th>
<th>wsim_class</th>
<th>wsim_class_pop</th>
<th>month_pop</th>
<th>wsim_class_frac</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>April</td>
<td>0</td>
<td>407597.0</td>
<td>36565982.0</td>
<td>0.011147</td>
</tr>
<tr>
<th>1</th>
<td>April</td>
<td>3</td>
<td>115254.0</td>
<td>36565982.0</td>
<td>0.003152</td>
</tr>
<tr>
<th>2</th>
<td>April</td>
<td>4</td>
<td>5217618.0</td>
<td>36565982.0</td>
<td>0.142690</td>
</tr>
<tr>
<th>3</th>
<td>April</td>
<td>5</td>
<td>20640931.0</td>
<td>36565982.0</td>
<td>0.564485</td>
</tr>
<tr>
<th>4</th>
<td>April</td>
<td>6</td>
<td>6052406.0</td>
<td>36565982.0</td>
<td>0.165520</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>76</th>
<td>September</td>
<td>3</td>
<td>6428278.0</td>
<td>36565982.0</td>
<td>0.175799</td>
</tr>
<tr>
<th>77</th>
<td>September</td>
<td>4</td>
<td>6369109.0</td>
<td>36565982.0</td>
<td>0.174181</td>
</tr>
<tr>
<th>78</th>
<td>September</td>
<td>5</td>
<td>4146780.0</td>
<td>36565982.0</td>
<td>0.113405</td>
</tr>
<tr>
<th>79</th>
<td>September</td>
<td>6</td>
<td>4651595.0</td>
<td>36565982.0</td>
<td>0.127211</td>
</tr>
<tr>
<th>80</th>
<td>September</td>
<td>7</td>
<td>13125040.0</td>
<td>36565982.0</td>
<td>0.358941</td>
</tr>
</tbody>
</table>
<p>81 rows × 5 columns</p>
</div><p>Before plotting we’ll make the month labels more legible for plotting,
convert the WSIM-GLDAS return period classes into a categorical class,
convert the month into an ordered categorical class, and set the
WSIM-GLDAS class palette.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wsim class as category</span>
<span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"wsim_class"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"wsim_class"</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">"category"</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># give ordinal pretty labels</span>
<span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"wsim_class"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"wsim_class"</span><span class="p">]</span>
    <span class="o">.</span><span class="n">cat</span>
    <span class="o">.</span><span class="n">rename_categories</span><span class="p">(</span>
        <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">:</span> <span class="s2">"-3"</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="s2">"-5"</span><span class="p">,</span>
        <span class="mi">3</span><span class="p">:</span> <span class="s2">"-10"</span><span class="p">,</span>
        <span class="mi">4</span><span class="p">:</span> <span class="s2">"-20"</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">:</span> <span class="s2">"-40"</span><span class="p">,</span>
        <span class="mi">6</span><span class="p">:</span> <span class="s2">"-50"</span><span class="p">,</span>
        <span class="mi">7</span><span class="p">:</span> <span class="s2">"-60"</span><span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="c1"># same for the months</span>
<span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"month"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span>
    <span class="n">cal_summaries</span><span class="p">[</span><span class="s2">"month"</span><span class="p">],</span>
    <span class="n">categories</span><span class="o">=</span><span class="p">[</span>
        <span class="s2">"January"</span><span class="p">,</span>
        <span class="s2">"February"</span><span class="p">,</span>
        <span class="s2">"March"</span><span class="p">,</span>
        <span class="s2">"April"</span><span class="p">,</span>
        <span class="s2">"May"</span><span class="p">,</span>
        <span class="s2">"June"</span><span class="p">,</span>
        <span class="s2">"July"</span><span class="p">,</span>
        <span class="s2">"August"</span><span class="p">,</span>
        <span class="s2">"September"</span><span class="p">,</span>
        <span class="s2">"October"</span><span class="p">,</span>
        <span class="s2">"November"</span><span class="p">,</span>
        <span class="s2">"December"</span>
    <span class="p">],</span>
    <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># set our desired palette</span>
<span class="n">leg_colors</span><span class="o">=</span><span class="p">[</span>
    <span class="s2">"#9B0039"</span><span class="p">,</span>  <span class="c1"># -50 to -40</span>
    <span class="s2">"#D44135"</span><span class="p">,</span>  <span class="c1"># -40 to -20</span>
    <span class="s2">"#FF8D43"</span><span class="p">,</span>  <span class="c1"># -20 to -10</span>
    <span class="s2">"#FFC754"</span><span class="p">,</span>  <span class="c1"># -10 to -5</span>
    <span class="s2">"#FFEDA3"</span><span class="p">,</span>  <span class="c1"># -5 to -3</span>
    <span class="s2">"#fffdc7"</span><span class="p">,</span>  <span class="c1"># -3 to 0</span>
    <span class="s2">"#FFF4C7"</span><span class="p">,</span>  <span class="c1"># 0-3</span>
    <span class="s2">"#FFFFFF"</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Although matplotlib is the more “python” way to plot, we are going to
use the python version of R’s popular ggplot2 package. It’s a simpler
code structure, and will keep synergy between the R and Python versions
of this lesson.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">plotnine</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># plot it</span>
<span class="n">ggplot</span><span class="p">(</span>
    <span class="n">cal_summaries</span><span class="p">,</span>
    <span class="n">aes</span><span class="p">(</span><span class="s2">"month"</span><span class="p">,</span> <span class="s2">"wsim_class_frac"</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">"wsim_class"</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s2">"wsim_class"</span><span class="p">)</span>
<span class="p">)</span> <span class="o">+</span>
<span class="n">scale_fill_manual</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">leg_colors</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span>
<span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="o">=</span><span class="s2">"identity"</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">"stack"</span><span class="p">)</span> <span class="o">+</span>
<span class="n">labs</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Population Under Water Deficits in 2014 California Drought"</span><span class="p">,</span>
    <span class="n">subtitle</span><span class="o">=</span><span class="s2">"Categorized by Intensity of Deficit Return Period"</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Fraction of Population*"</span><span class="p">,</span>
    <span class="n">caption</span><span class="o">=</span><span class="s2">"Population derived from Gridded Population of World (2015)"</span><span class="p">,</span>
    <span class="n">fill</span><span class="o">=</span><span class="s2">"Deficit Class"</span><span class="p">)</span> <span class="o">+</span>
<span class="n">theme_minimal</span><span class="p">()</span> <span class="o">+</span>
<span class="n">theme</span><span class="p">(</span><span class="n">axis_text_x</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">hjust</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<img alt="../../../_images/wsim-plotnine.png" src="../../../_images/wsim-plotnine.png"/>
<p>This figure really illustrates the human impact of the 2014 drought.
Nearly 100% of the population was under a 60+ year deficit in January
followed by 66% in May and approximately 40% for the remainder of the
summer. That is a devastating drought!</p>
</div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">In this lesson, you learned…</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg aria-hidden="true" class="sd-octicon sd-octicon-chevron-right" height="1.5em" version="1.1" viewbox="0 0 24 24" width="1.5em"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<ul class="simple">
<li><p class="sd-card-text">To navigate the SEDAC website to find and download datasets.</p></li>
<li><p class="sd-card-text">To access administrative boundaries from geoBoundaries data using API.</p></li>
<li><p class="sd-card-text">To temporarily subset a NetCDF raster stack using R packages such as
dplyr and lubridate.</p></li>
<li><p class="sd-card-text">To crop a NetCDF raster stack with a spatial boundary.</p></li>
<li><p class="sd-card-text">To write a subsetted dataset to disk and create an image to share
results.</p></li>
<li><p class="sd-card-text">To identify areas of severe drought and select these areas for further
analysis.</p></li>
<li><p class="sd-card-text">To summarize data by county using the exactextractr tool.</p></li>
<li><p class="sd-card-text">To integrate WSIM-GLDAS deficit, GPW population, and geoBoundaries
administrative boundary data to create complex time series
visualizations.</p></li>
</ul>
</div>
</details><h2 class="rubric">References</h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id14" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id2" role="doc-backlink">1</a><span class="fn-bracket">]</span></span>
<p>NOAA. 2019. <a class="reference external" href="https://www.noaa.gov/education/resource-collections/freshwater/water-cycle">“Water Cycle.”</a> National Oceanic;
Atmospheric Administration.</p>
</aside>
<aside class="footnote brackets" id="id15" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id3" role="doc-backlink">2</a><span class="fn-bracket">]</span></span>
<p>IPCC. 2023. <a class="reference external" href="https://ciesin-geospatial.github.io/TOPSTSCHOOL-water/m101-wsim-gldas.html#ref-intergovernmentalpanelonclimatechange2023">“Climate Change 2021 the Physical Science Basis”</a>, June.</p>
</aside>
<aside class="footnote brackets" id="id16" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id4" role="doc-backlink">3</a><span class="fn-bracket">]</span></span>
<p>Zhou, Haddeland, T. 2016. <a class="reference external" href="https://ciesin-geospatial.github.io/TOPSTSCHOOL-water/m101-wsim-gldas.html#ref-Zhou2016">“Human-Induced Changes in Global Water
Cycle.”</a> Geophysical Monograph Series.</p>
</aside>
<aside class="footnote brackets" id="id17" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id7" role="doc-backlink">4</a><span class="fn-bracket">]</span></span>
<p>Rodgers, Alison Ince. 2023. <a class="reference external" href="https://ciesin-geospatial.github.io/TOPSTSCHOOL-water/m101-wsim-gldas.html#ref-Rodgers2023">“Understanding Droughts.”</a> National Geographic Society.</p>
</aside>
<aside class="footnote brackets" id="id18" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id8" role="doc-backlink">5</a><span class="fn-bracket">]</span></span>
<p>Guillen, George. 2002. <a class="reference external" href="https://ciesin-geospatial.github.io/TOPSTSCHOOL-water/m101-wsim-gldas.html#ref-guillen2002">“Klamath River Fish Die-Off.”</a> Mortality Report AFWO-01-03. Arcata, CA: U.S. Fish &amp;
Wildlife Service.</p>
</aside>
<aside class="footnote brackets" id="id19" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id9" role="doc-backlink">6</a><span class="fn-bracket">]</span></span>
<p>Bland, Alastair. 2014. <a class="reference external" href="https://www.npr.org/sections/thesalt/2014/08/21/342167846/california-drought-has-wild-salmon-competing-with-almonds-for-water">“California Drought Has Wild Salmon Competing
with Almonds for Water.”</a> National Public Radio.</p>
</aside>
<aside class="footnote brackets" id="isciences" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a href="#id11" role="doc-backlink">1</a>,<a href="#id12" role="doc-backlink">2</a>)</span>
<p>ISciences, and Center For International Earth Science
Information Network-CIESIN-Columbia University. 2022a. <a class="reference external" href="https://doi.org/10.7927/X7FJ-JJ41">“Documentation for
the Water Security Indicator Model - Global Land Data Assimilation System
(WSIM-GLDAS) Monthly Grids, Version 1.”</a> Palisades, NY: NASA Socioeconomic Data; Applications Center
(SEDAC).</p>
</aside>
</aside>
<h2 class="rubric">Attributions</h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="freepik-1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id5" role="doc-backlink">8</a><span class="fn-bracket">]</span></span>
<p>Image by <a class="reference external" href="https://www.freepik.com/free-photo/pollution-concept-factory-emisions_18268018.htm#fromView=search&amp;page=1&amp;position=13&amp;uuid=6b870993-1f14-4765-b9bb-ef68514a09d3">freepik - 13</a></p>
</aside>
<aside class="footnote brackets" id="freepik-2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id6" role="doc-backlink">9</a><span class="fn-bracket">]</span></span>
<p>Image by <a class="reference external" href="https://www.freepik.com/free-photo/pollution-concept-factory-emisions_18268011.htm#fromView=search&amp;page=1&amp;position=26&amp;uuid=6b870993-1f14-4765-b9bb-ef68514a09d3">freepik - 26</a></p>
</aside>
<aside class="footnote brackets" id="klamath-death" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id10" role="doc-backlink">10</a><span class="fn-bracket">]</span></span>
<p>Our Klamath Basin Water Crisis <a class="reference external" href="https://ca-times.brightspotcdn.com/dims4/default/15e8000/2147483647/strip/true/crop/4032x3024+0+0/resize/840x630!/quality/90/?url=https://california-times-brightspot.s3.amazonaws.com/1e/a1/eb76da6f4c5a9ad847549d2b3fa9/tsfxbams.jpeg">article</a></p>
</aside>
<aside class="footnote brackets" id="nasa-svs-1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a href="#id1" role="doc-backlink">11</a><span class="fn-bracket">]</span></span>
<p>A true color satellite <a class="reference external" href="https://svs.gsfc.nasa.gov/12950/#media_group_325749">image</a> of California shows drought in the region
which corresponds with decreases in freshwater reserves</p>
</aside>
</aside>
</section>
</section>
</div>
</div>
<div class="items-center gap-4 previous-next">
<div class="ml-auto">
<a class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors border border-input hover:bg-accent hover:text-accent-foreground py-2 px-4" href="overview.html">
<span style="margin-top: 0.3rem;"><i class="fa fa-chevron-left" style="font-size: 1.5rem;"></i></span>
</a>
</div>
<div class="mr-auto">
<a class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors border border-input hover:bg-accent hover:text-accent-foreground py-2 px-4" href="../../_tutorials/_001-basics/open-science-101.html">
<span style="margin-top: 0.3rem;"><i class="fa fa-chevron-right" style="font-size: 1.5rem;"></i></span>
</a>
</div>
</div>
</main>
</div>
</div>

<footer class="py-6 footer-bg border-border md:py-0">
<div class="footer-element">
<div class="flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0">
<div class="extra-footer-elements">
<span class="text-sm leading-loose text-center text-muted-foreground md:text-left">
                        To submit feedback on documentation, visit
                        <a href="https://github.com/ciesin-geospatial/TOPSTSCHOOL-OSDMP/issues/new?labels=community,discussion needed,documentation,enhancementmiscellaneous,open science,question&amp;title=Feedback about documentation" style="color: var(--link);">Feedback</a>.
                    </span>
<span class="text-sm leading-loose text-center text-muted-foreground md:text-left">Copyright © 2024, TOPST SCHOOL Development Team.</span>
<span class="text-sm leading-loose text-center text-muted-foreground md:text-left">Built with <a class="font-medium" href="https://www.sphinx-doc.org" rel="noreferrer" style="color: var(--link);">Sphinx 8.0.2.</a></span>
<span class="text-sm leading-loose text-center text-muted-foreground md:text-left">Last updated: October 06, 2024</span>
</div>
</div>
</div>
</footer>
</div>
<script src="../../../_static/documentation_options.js?v=5929fcd5"></script><script src="../../../_static/doctools.js?v=9a2dae69"></script><script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script><script src="../../../_static/clipboard.min.js?v=a7894cd8"></script><script src="../../../_static/copybutton.js?v=f281be69"></script><script defer="defer" src="../../../_static/main.js?v=4c2e7a9f"></script><script defer="defer" src="../../../_static/coeus.js?v=750a0ed0"></script><script src="../../../_static/design-tabs.js?v=f930bc37"></script><script src="../../../_static/bootstrap-carousel.min.js?v=9a6c5d3e"></script>

</body>
</html>